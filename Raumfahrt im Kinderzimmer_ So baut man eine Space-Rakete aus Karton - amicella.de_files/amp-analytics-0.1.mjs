(self.AMP=self.AMP||[]).push({n:"amp-analytics",v:"2012090206000",f:function(e,t){var r;function i(){return r?r:r=Promise.resolve(void 0)}var n=class{constructor(){var e,t;this.promise=new Promise(((r,i)=>{e=r;t=i}));this.resolve=e;this.reject=t}};function s(e){return new Promise((t=>{t(e())}))}function a(e,t=""){try{return decodeURIComponent(e)}catch(e){return t}}var o=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function l(e){var t=Object.create(null);if(!e)return t;var r;for(;r=o.exec(e);){var i=a(r[1],r[1]),n=r[2]?a(r[2].replace(/\+/g," "),r[2]):"";t[i]=n}return t}var h="";function c(e){var t=e||self;if(t.__AMP_MODE)var r=t.__AMP_MODE;else{r=l(t.location.originalHash||t.location.hash);var i=l(t.location.search);h||(h=t.AMP_CONFIG&&t.AMP_CONFIG.v?t.AMP_CONFIG.v:"012012090206000");r={localDev:!1,development:!!(0<=["1","actions","amp","amp4ads","amp4email"].indexOf(r.development)||t.AMP_DEV_MODE),examiner:"2"==r.development,esm:!0,geoOverride:r["amp-geo"],minified:!0,lite:void 0!=i.amp_lite,test:!1,log:r.log,version:"2012090206000",rtvVersion:h};r=t.__AMP_MODE=r}return r}var u=Object.prototype.toString;function d(e){return Array.isArray(e)}function m(e){return"[object Object]"===u.call(e)}function p(e){return"number"===typeof e&&isFinite(e)}function f(e){var t=ar;for(var r in t)if(t[r]===e)return!0;return!1}var v=self.AMP_CONFIG||{},g=("string"==typeof v.cdnProxyRegex?new RegExp(v.cdnProxyRegex):v.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function b(e){if(!self.document||!self.document.head||self.location&&g.test(self.location.origin))return null;var t=self.document.head.querySelector(`meta[name="${e}"]`);return t&&t.getAttribute("content")||null}var y={thirdParty:v.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:v.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof v.thirdPartyFrameRegex?new RegExp(v.thirdPartyFrameRegex):v.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:v.cdnUrl||b("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:g,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:v.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:v.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:v.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:v.geoApiUrl||b("amp-geo-api")};function E(e){var t=null;var r="";for(var i=0;i<arguments.length;i++){var n=arguments[i];if(n instanceof Error&&!t)e:{t=n;if((n=Object.getOwnPropertyDescriptor(t,"message"))&&n.writable)break e;n=t.stack;var s=Error(t.message);for(var a in t)s[a]=t[a];s.stack=n;t=s}else r&&(r+=" "),r+=n}t?r&&(t.message=r+": "+t.message):t=Error(r);return t}function w(e){var t=E.apply(null,arguments);setTimeout((()=>{self.__AMP_REPORT_ERROR(t);throw t}))}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var A=self.__AMP_LOG;function T(){if(!A.user)throw Error("failed to call initLogConstructor");return A.user}function O(){if(A.dev)return A.dev;throw Error("failed to call initLogConstructor")}function R(e,t,r,i,n,s){return T().assert(e,t,r,i,n,s,void 0,void 0,void 0,void 0,void 0)}function S(e,t){e=I(e);return D(e,t)}function P(e,t){var r=C(e);r=x(r);return D(r,t)}function _(e,t){e=C(e);e=x(e);return V(e,t)?D(e,t):null}function M(e,t){return L(x(e),t)}function I(e){return e.__AMP_TOP||(e.__AMP_TOP=e)}function N(e,t){var r=(e.ownerDocument||e).defaultView;e=t||I(r);if(r&&r!=e&&I(r)==e)try{return r.frameElement}catch(e){}return null}function C(e){return e.nodeType?S((e.ownerDocument||e).defaultView,"ampdoc").getAmpDoc(e):e}function x(e){e=C(e);return e.isSingleDoc()?e.win:e}function D(e,t){V(e,t);e=U(e)[t];e.obj||(e.obj=new e.ctor(e.context),e.ctor=null,e.context=null,e.resolve&&e.resolve(e.obj));return e.obj}function j(e,t,r,i){var n=U(e);var s=n[r];s||(s=n[r]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null,adopted:!1});s.ctor||s.obj||(s.ctor=i,s.context=t,s.adopted=!1,s.resolve&&D(e,r))}function k(e,t){var r=L(e,t);if(r)return r;e=U(e);e[t]=F();return e[t].promise}function L(e,t){var r=U(e)[t];if(r){if(r.promise)return r.promise;D(e,t);return r.promise=Promise.resolve(r.obj)}return null}function U(e){var t=e.__AMP_SERVICES;t||(t=e.__AMP_SERVICES={});return t}function V(e,t){e=e.__AMP_SERVICES&&e.__AMP_SERVICES[t];return!(!e||!e.ctor&&!e.obj)}function F(){var e=new n,t=e.promise,r=e.resolve,i=e.reject;t.catch((()=>{}));return{obj:null,promise:t,resolve:r,reject:i,context:null,ctor:null}}
/*
    https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var H=Object.prototype.hasOwnProperty;function B(e){return e||{}}function q(e,t){return H.call(e,t)}function G(e,t,r=10){var i=[],n=[];for(n.push({t:e,s:t,d:0});0<n.length;){let{t:e,s:t,d:s}=n.shift();if(i.includes(t))throw Error("Source object has a circular reference.");i.push(t);e!==t&&(s>r?Object.assign(e,t):Object.keys(t).forEach((r=>{var i=t[r];if(q(e,r)){var a=e[r];if(m(i)&&m(a)){n.push({t:a,s:i,d:s+1});return}}e[r]=i})))}}function $(e,t){var r=e.length-t.length;return 0<=r&&e.indexOf(t,r)==r}function W(e,t){for(var r=0;5>r;r++){let r=0;e=e.replace(/\${([^}]*)}/g,((e,i)=>{r++;return t(i)}));if(!r)break}return e}function z(e,t){var r=/\${([^}]*)}/g;if("string"===typeof t)return Promise.resolve(e.replace(r,t));var i=[];var n=0;e.replace(r,(function(r){var s=arguments[arguments.length-2];i.push(e.slice(n,s));n=s+r.length;var a=t.apply(null,arguments);i.push(a)}));i.push(e.slice(n));return Promise.all(i).then((e=>e.join("")))}function J(e,t,r){e=e.createElement(t);for(var i in r)e.setAttribute(i,r[i]);return e}function Y(e,t){for(;e&&void 0!==e;e=e.parentElement)if(t(e))return e;return null}function K(e,t){return e.closest?e.closest(t):Y(e,(e=>Z(e,t)))}function X(e,t){for(e=e.lastElementChild;e;e=e.previousElementSibling)if(t(e))return e;return null}function Z(e,t){var r=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector;return r?r.call(e,t):!1}function Q(e,t){var r=e=>e,i=e.dataset;e={};var n=t?t:/^param(.+)/;for(var s in i){var a=s.match(n);a&&(a=a[1][0].toLowerCase()+a[1].substr(1),e[r(a)]=i[s])}return e}function ee(e){return te(e,"userNotificationManager","amp-user-notification",void 0).then((e=>R(e,"Service %s was requested to be provided through %s, but %s is not loaded in the current page. To fix this problem load the JavaScript file for %s in this page.","userNotificationManager","amp-user-notification","amp-user-notification","amp-user-notification")))}function te(e,t,r,n){var s=M(e,t);if(s)return s;var a=C(e);return a.waitForBodyOpen().then((()=>{var e=a.win;var t=a.win.document.head;if(t){var n={};t=t.querySelectorAll("script[custom-element],script[custom-template]");for(var s=0;s<t.length;s++){var o=t[s];o=o.getAttribute("custom-element")||o.getAttribute("custom-template");n[o]=!0}n=Object.keys(n)}else n=[];return n.includes(r)?S(e,"extensions").waitForExtension(e,r):i()})).then((()=>{if(n)var i=M(e,t);else i=a.win,i=i.__AMP_EXTENDED_ELEMENTS&&i.__AMP_EXTENDED_ELEMENTS[r]?k(x(e),t):null;return i}))}function re(e){return S(e,"performance")}function ie(e){return _(e,"url-replace")}function ne(e){return te(e,"consentPolicyManager","amp-consent")}function se(e){return P(e,"viewport")}var ae;function oe(e,t,r,i){var n,s=e,a=r;n=e=>{try{return a(e)}catch(e){throw self.__AMP_REPORT_ERROR(e),e}};var o=le();var l=!1;i&&(l=i.capture);s.addEventListener(t,n,o?i:l);return()=>{s&&s.removeEventListener(t,n,o?i:l);n=s=a=null}}function le(){if(void 0!==ae)return ae;ae=!1;try{var e={get capture(){ae=!0}};self.addEventListener("test-options",null,e);self.removeEventListener("test-options",null,e)}catch(e){}return ae}function he(e,t,r,i){var n=r;var s=oe(e,t,(e=>{try{n(e)}finally{n=null,s()}}),i);return s}function ce(e){return!!(e.complete||"complete"==e.readyState||de(e)&&0<e.readyState||e.document&&"complete"==e.document.readyState)}function ue(e){var t,r;if(ce(e))return Promise.resolve(e);var i=de(e);return i&&e.__AMP_MEDIA_LOAD_FAILURE_SRC===e.currentSrc?Promise.reject(e):new Promise(((n,s)=>{t=i?he(e,"loadedmetadata",n,{capture:!0}):he(e,"load",n);if(e.tagName){var a=e;if(i&&!e.hasAttribute("src")&&(a=X(e,(e=>"SOURCE"===e.tagName)),!a))return s(Error("Media has no source."));r=he(a,"error",s)}})).then((()=>{r&&r();return e}),(()=>{t&&t();de(e)&&(e.__AMP_MEDIA_LOAD_FAILURE_SRC=e.currentSrc||!0);var r=e;r&&r.src&&(r=r.src);throw T().createError("Failed to load:",r)}))}function de(e){return"AUDIO"===e.tagName||"VIDEO"===e.tagName}function me(e,t){var r=0;"active"===e.type&&(r=5);return Math.min(t-e.time,r)}var pe=class{constructor(){this.Ib=0;this.la=void 0}push(e){this.la&&this.la.time<e.time&&(this.Ib+=me(this.la,e.time));this.la=e}getTotalEngagedTime(e){var t=0;void 0!==this.la&&(t=this.Ib+me(this.la,e));return t}};var fe=["mousedown","mouseup","mousemove","keydown","keyup"],ve=["mouseleave"];function ge(e){var t=Date.now()-e.W;return 0<t?t:0}function be(e,t){var r=ge(e),i=Math.floor(r/1e3);setTimeout(e.Ec,1e3-r%1e3);e.Mb.push({type:t,time:i})}var ye=class{constructor(e){this.ampdoc=e;this.Ec=this.ld.bind(this);this.Qb=this.vb.bind(this);this.Cc=this.$b.bind(this);this.Dc=this.Tc.bind(this);this.Ga={};this.pa=[];this.Xa=this.Wa=!1;this.Mb=new pe;this.S=se(this.ampdoc);this.ampdoc.whenFirstVisible().then(this.kd.bind(this))}kd(){this.W=Date.now();this.vb();var e=this.ampdoc.getRootNode(),t=this.Qb;for(var r=0;r<fe.length;r++)this.pa.push(oe(e,fe[r],t,void 0));e=this.ampdoc.getRootNode();t=this.Cc;for(r=0;r<ve.length;r++)this.pa.push(oe(e,ve[r],t,void 0));this.pa.push(this.ampdoc.onVisibilityChanged(this.Dc));this.S.onScroll(this.Qb)}ld(){this.Xa=this.Wa=!1}vb(){this.Wa||(this.Wa=!0,this.Xa=!1,be(this,"active"))}$b(){this.Xa||(this.Xa=!0,this.Wa=!1,be(this,"inactive"))}Tc(){this.ampdoc.isVisible()?this.vb():this.$b()}Kb(){for(var e=0;e<this.pa.length;e++){var t=this.pa[e];"function"===typeof t&&t()}this.pa=[]}pd(){this.Kb()}getTotalEngagedTime(){var e=Math.floor(ge(this)/1e3);return this.Mb.getTotalEngagedTime(e)}getIncrementalEngagedTime(e,t=!0){if(!q(this.Ga,e))return t&&(this.Ga[e]=this.getTotalEngagedTime()),this.getTotalEngagedTime();var r=this.Ga[e];if(!1===t)return this.getTotalEngagedTime()-r;this.Ga[e]=this.getTotalEngagedTime();return this.Ga[e]-r}};function Ee(e,t){try{return JSON.parse(e)}catch(e){return t&&t(e),null}}var we=JSON.parse('{"transport":{"beacon":true,"xhrpost":true,"image":true},"vars":{"accessReaderId":"ACCESS_READER_ID","ampGeo":"AMP_GEO","ampState":"AMP_STATE","ampVersion":"AMP_VERSION","ampdocHost":"AMPDOC_HOST","ampdocHostname":"AMPDOC_HOSTNAME","ampdocMeta":"AMPDOC_META","ampdocUrl":"AMPDOC_URL","authdata":"AUTHDATA","availableScreenHeight":"AVAILABLE_SCREEN_HEIGHT","availableScreenWidth":"AVAILABLE_SCREEN_WIDTH","backgroundState":"BACKGROUND_STATE","browserLanguage":"BROWSER_LANGUAGE","canonicalHost":"CANONICAL_HOST","canonicalHostname":"CANONICAL_HOSTNAME","canonicalPath":"CANONICAL_PATH","canonicalUrl":"CANONICAL_URL","clientId":"CLIENT_ID","consentState":"CONSENT_STATE","consentString":"CONSENT_STRING","contentLoadTime":"CONTENT_LOAD_TIME","cookie":"COOKIE","counter":"COUNTER","cumulativeLayoutShift":"CUMULATIVE_LAYOUT_SHIFT","documentCharset":"DOCUMENT_CHARSET","documentReferrer":"DOCUMENT_REFERRER","domInteractiveTime":"DOM_INTERACTIVE_TIME","domainLookupTime":"DOMAIN_LOOKUP_TIME","experimentBranches":"EXPERIMENT_BRANCHES","externalReferrer":"EXTERNAL_REFERRER","firstContentfulPaint":"FIRST_CONTENTFUL_PAINT","firstInputDelay":"FIRST_INPUT_DELAY","firstViewportReady":"FIRST_VIEWPORT_READY","fragmentParam":"FRAGMENT_PARAM","htmlAttr":"HTML_ATTR","incrementalEngagedTime":"INCREMENTAL_ENGAGED_TIME","largestContentfulPaint":"LARGEST_CONTENTFUL_PAINT","makeBodyVisible":"MAKE_BODY_VISIBLE","navRedirectCount":"NAV_REDIRECT_COUNT","navTiming":"NAV_TIMING","navType":"NAV_TYPE","pageDownloadTime":"PAGE_DOWNLOAD_TIME","pageLoadTime":"PAGE_LOAD_TIME","pageViewId":"PAGE_VIEW_ID","pageViewId64":"PAGE_VIEW_ID_64","queryParam":"QUERY_PARAM","random":"RANDOM","redirectTime":"REDIRECT_TIME","resourceTiming":"RESOURCE_TIMING","screenColorDepth":"SCREEN_COLOR_DEPTH","screenHeight":"SCREEN_HEIGHT","screenWidth":"SCREEN_WIDTH","scrollHeight":"SCROLL_HEIGHT","scrollLeft":"SCROLL_LEFT","scrollTop":"SCROLL_TOP","scrollWidth":"SCROLL_WIDTH","serverResponseTime":"SERVER_RESPONSE_TIME","sourceHost":"SOURCE_HOST","sourceHostname":"SOURCE_HOSTNAME","sourcePath":"SOURCE_PATH","sourceUrl":"SOURCE_URL","tcpConnectTime":"TCP_CONNECT_TIME","timestamp":"TIMESTAMP","timezone":"TIMEZONE","timezoneCode":"TIMEZONE_CODE","title":"TITLE","totalEngagedTime":"TOTAL_ENGAGED_TIME","userAgent":"USER_AGENT","viewer":"VIEWER","viewportHeight":"VIEWPORT_HEIGHT","viewportWidth":"VIEWPORT_WIDTH"}}');var Ae=class{constructor(){this.Hc=100;this.nb=this.Hb=0;this.La=Object.create(null)}has(e){return!!this.La[e]}get(e){var t=this.La[e];if(t)return t.access=++this.nb,t.payload}put(e,t){this.has(e)||this.Hb++;this.La[e]={payload:t,access:this.nb};if(!(this.Hb<=this.Hc)){e=this.La;var r=this.nb+1;for(var i in e){var{access:n}=e[i];if(n<r){r=n;var s=i}}void 0!==s&&(delete e[s],this.Hb--)}}};var Te=B({c:!0,v:!0,a:!0,ad:!0});var Oe,Re;var Se=/[?&]amp_js[^&]*/,Pe=/[?&]amp_gsa[^&]*/,_e=/[?&]amp_r[^&]*/,Me=/[?&]amp_kit[^&]*/,Ie=/[?&]usqp[^&]*/;function Ne(e){Oe||(Oe=self.document.createElement("a"),Re=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new Ae));var t=Re,r=Oe;if(t&&t.has(e))e=t.get(e);else{r.href=e;r.protocol||(r.href=r.href);var i={href:r.href,protocol:r.protocol,host:r.host,hostname:r.hostname,port:"0"==r.port?"":r.port,pathname:r.pathname,search:r.search,hash:r.hash,origin:null};"/"!==i.pathname[0]&&(i.pathname="/"+i.pathname);if("http:"==i.protocol&&80==i.port||"https:"==i.protocol&&443==i.port)i.port="",i.host=i.hostname;i.origin=r.origin&&"null"!=r.origin?r.origin:"data:"!=i.protocol&&i.host?i.protocol+"//"+i.host:i.href;t&&t.put(e,i);e=i}return e}function Ce(e,t,r){if(!t)return e;var i=e.split("#",2),n=i[0].split("?",2);var s=n[0]+(n[1]?r?`?${t}&${n[1]}`:`?${n[1]}&${t}`:`?${t}`);return s+=i[1]?`#${i[1]}`:""}function xe(e){var t=[];for(var r in e){var i=e[r];if(null!=i)if(d(i))for(var n=0;n<i.length;n++){var s=i[n];t.push(`${encodeURIComponent(r)}=${encodeURIComponent(s)}`)}else t.push(`${encodeURIComponent(r)}=${encodeURIComponent(i)}`)}return t.join("&")}function De(e,t){R(null!=e,"%s %s must be available",t,"source");var r=e;"string"==typeof r&&(r=Ne(r));r="https:"==r.protocol||"localhost"==r.hostname||"127.0.0.1"==r.hostname||$(r.hostname,".localhost");R(r||/^(\/\/)/.test(e),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',t,"source",e)}function je(e){"string"==typeof e&&(e=Ne(e));return y.cdnProxyRegex.test(e.origin)}function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,i)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(r),!0).forEach((function(t){var i=r[t];t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ue(e){if(e.__AMP__EXPERIMENT_TOGGLES)return e.__AMP__EXPERIMENT_TOGGLES;e.__AMP__EXPERIMENT_TOGGLES=Object.create(null);var t=e.__AMP__EXPERIMENT_TOGGLES;if(e.AMP_CONFIG)for(var r in e.AMP_CONFIG){var i=e.AMP_CONFIG[r];"number"===typeof i&&0<=i&&1>=i&&(t[r]=Math.random()<i)}if(e.AMP_CONFIG&&Array.isArray(e.AMP_CONFIG["allow-doc-opt-in"])&&0<e.AMP_CONFIG["allow-doc-opt-in"].length){var n=e.AMP_CONFIG["allow-doc-opt-in"],s=e.document.head.querySelector('meta[name="amp-experiments-opt-in"]');if(s){var a=s.getAttribute("content").split(",");for(r=0;r<a.length;r++)-1!=n.indexOf(a[r])&&(t[a[r]]=!0)}}Object.assign(t,Ve(e));if(e.AMP_CONFIG&&Array.isArray(e.AMP_CONFIG["allow-url-opt-in"])&&0<e.AMP_CONFIG["allow-url-opt-in"].length){r=e.AMP_CONFIG["allow-url-opt-in"];e=l(e.location.originalHash||e.location.hash);for(var o=0;o<r.length;o++){var h=e[`e-${r[o]}`];"1"==h&&(t[r[o]]=!0);"0"==h&&(t[r[o]]=!1)}}return t}function Ve(e){var t="";try{"localStorage"in e&&(t=e.localStorage.getItem("amp-experiment-toggles"))}catch(e){}var r=t?t.split(/\s*,\s*/g):[];e=Object.create(null);for(var i=0;i<r.length;i++)0!=r[i].length&&("-"==r[i][0]?e[r[i].substr(1)]=!1:e[r[i]]=!0);return e}function Fe(e){e=I(e);e.__AMP_EXPERIMENT_BRANCHES||(e.__AMP_EXPERIMENT_BRANCHES={});return Le({},e.__AMP_EXPERIMENT_BRANCHES)}function He(e){return"undefined"!==typeof TextEncoder?new TextEncoder("utf-8").encode(e):Be(unescape(encodeURIComponent(e)))}function Be(e){var t=new Uint8Array(e.length);for(var r=0;r<e.length;r++){var i=e.charCodeAt(r);t[r]=i}return t}function qe(e){var t=Array(e.length);for(var r=0;r<e.length;r++)t[r]=String.fromCharCode(e[r]);return t.join("")}var Ge={"-":"+",_:"/",".":"="},$e={"+":"-","/":"_","=":"."};function We(e){var t=atob(e.replace(/[-_.]/g,(e=>Ge[e])));return Be(t)}function ze(e){e=qe(e);return btoa(e).replace(/[+/=]/g,(e=>$e[e]))}function Je(e){e=He(e);return ze(e)}function Ye(e,t){var r=Ke(e);if(!r)return null;var i=r.split(";");for(e=0;e<i.length;e++){var n=i[e].trim(),s=n.indexOf("=");var o;if(o=-1!=s)o=n.substring(0,s).trim(),o=a(o,void 0)==t;if(o)return t=n.substring(s+1).trim(),a(t,t)}return null}function Ke(e){try{return e.document.cookie}catch(e){return""}}function Xe(e,t,r,i,n={}){if(n.allowOnProxyOrigin)R(!n.highestAvailableDomain,"Could not support highestAvailable Domain on proxy origin, specify domain explicitly");else{R(!je(e.location.href),`Should never attempt to set cookie on proxy origin: ${t}`);var s=Ne(e.location.href).hostname.toLowerCase(),a=Ne(y.cdn).hostname.toLowerCase();R(!(s==a||$(s,"."+a)),"Should never attempt to set cookie on proxy origin. (in depth check): "+t)}s=void 0;n.domain?s=n.domain:n.highestAvailableDomain&&(s=Ze(e));Qe(e,t,r,i,s,n.sameSite,n.secure)}function Ze(e){var t=e.document.head&&e.document.head.querySelector("meta[name='amp-cookie-scope']");if(t){var r=t.getAttribute("content")||"";e=e.location.href;"string"==typeof e&&(e=Ne(e));if(je(e)){var i=e.pathname.split("/");R(Te[i[1]],"Unknown path prefix in url %s",e.href);var n=i[2],s="s"==n?"https://"+decodeURIComponent(i[3]):"http://"+decodeURIComponent(n);R(0<s.indexOf("."),"Expected a . in origin %s",s);i.splice(1,"s"==n?3:2);i=s+i.join("/");n=(n=e.search)&&"?"!=n?(n=n.replace(Se,"").replace(Pe,"").replace(_e,"").replace(Me,"").replace(Ie,"").replace(/^[?&]/,""))?"?"+n:"":"";e=i+n+(e.hash||"")}else e=e.href;e=Ne(e).origin;return $(e,"."+r)?r:e.split("://")[1]}if(!je(e.location.href)){i=e.location.hostname.split(".");n=i[i.length-1];for(s="-test-amp-cookie-tmp";Ye(e,s);)s="-test-amp-cookie-tmp0";for(var a=i.length-2;0<=a;a--)if(n=i[a]+"."+n,Qe(e,s,"delete",Date.now()+1e3,n),"delete"==Ye(e,s))return Qe(e,s,"delete",Date.now()-1e3,n),n}return null}function Qe(e,t,r,i,n,s,a){"ampproject.org"==n&&(r="delete",i=0);t=encodeURIComponent(t)+"="+encodeURIComponent(r)+"; path=/"+(n?"; domain="+n:"")+"; expires="+new Date(i).toUTCString()+(s?`; SameSite=${s}`:"")+(a?"; Secure":"");try{e.document.cookie=t}catch(e){}}function et(e){if(!tt(e))return null;var t=e.indexOf("{");try{return JSON.parse(e.substr(t))}catch(t){return O().error("MESSAGING","Failed to parse message: "+e,t),null}}function tt(e){return"string"==typeof e&&0==e.indexOf("amp-")&&-1!=e.indexOf("{")}function rt(e,t){var r=[];var i=0;for(var n=0;n<e.length;n++){var s=e[n];t(s,n,e)?r.push(s):(i<n&&(e[i]=s),i++)}i<e.length&&(e.length=i)}function it(e,t){for(var r=0;r<e.length;r++)if(t(e[r],r,e))return r;return-1}var nt;var st="Webkit webkit Moz moz ms O o".split(" ");function at(e){var t=!1;void 0===t&&(t=e.hasAttribute("hidden"));t?e.removeAttribute("hidden"):e.setAttribute("hidden","")}function ot(e,t,r){var{listeningFors:i}=e;!i&&r&&(i=e.listeningFors=Object.create(null));e=i||null;if(!e)return e;var n=e[t];!n&&r&&(n=e[t]=[]);return n||null}function lt(e,t,r){var i=r?t.getAttribute("data-amp-3p-sentinel"):"amp";e=ot(e,i,!0);var n;for(i=0;i<e.length;i++){var s=e[i];if(s.frame===t){n=s;break}}n||(n={frame:t,events:Object.create(null)},e.push(n));return n.events}function ht(e){var t=B({sentinel:"unlisten"});for(var r=e.length-1;0<=r;r--){var i=e[r];if(!i.frame.contentWindow){e.splice(r,1);i=i.events;for(var n in i)i[n].splice(0,1/0).forEach((e=>{e(t)}))}}}function ct(e){e.listeningFors||e.addEventListener("message",(function(t){if(t.data){var r=mt(t.data);if(r&&r.sentinel){var i=t.source;var n=ot(e,r.sentinel);if(n){for(var s=0;s<n.length;s++){var a=n[s],o=a.frame.contentWindow;if(o){var l;if(!(l=i==o))e:{for(l=i;l&&l!=l.parent;l=l.parent)if(l==o){l=!0;break e}l=!1}if(l){var h=a;break}}else setTimeout(ht,0,n)}var c=h?h.events:null}else c=n;if(c){var u=c[r.type];if(u)for(u=u.slice(),i=0;i<u.length;i++)(0,u[i])(r,t.source,t.origin,t)}}}}))}function ut(e,t,r,i){function n(r,n,s,l){if("amp"==r.sentinel){if(n!=e.contentWindow)return;var h="null"==s&&void 0;if(a!=s&&!h)return}if(i||n==e.contentWindow)"unlisten"==r.sentinel?o():t(r,n,s,l)}var s=e.ownerDocument.defaultView;ct(s);r=lt(s,e,r);var a=Ne(e.src).origin;var o,l=r["send-iframe-transport-events"]||(r["send-iframe-transport-events"]=[]);l.push(n);return o=function(){if(n){var e=l.indexOf(n);-1<e&&l.splice(e,1);t=l=n=null}}}function dt(e,t,r,i,n){if(e.contentWindow)for(i.type=r,i.sentinel=n?e.getAttribute("data-amp-3p-sentinel"):"amp",e=i,n&&(e="amp-"+JSON.stringify(i)),i=0;i<t.length;i++)n=t[i],n.win.postMessage(e,n.origin)}function mt(e){"string"==typeof e&&(e="{"==e.charAt(0)?Ee(e,(()=>{}))||null:tt(e)?et(e):null);return e}var pt=class{constructor(e,t){this.bc=e;this.xb=!0;this.ua=[];this.Kb=ut(this.bc,((e,r,i)=>{this.ua.some((e=>e.win==r))||this.ua.push({win:r,origin:i});t(e,r,i)}),this.xb,this.xb)}send(e,t){rt(this.ua,(e=>!e.win.parent));dt(this.bc,this.ua,e,t,this.xb)}destroy(){this.Kb();this.ua.length=0}};function ft(e){return e.classList.contains("i-amphtml-fie")||!!K(e,".i-amphtml-fie")}function vt(e,t){return!ft(t)&&!je(e.location)&&"inabox"!=c(e).runtime}function gt(e){return ne(e).then((e=>e?e.whenPolicyResolved("default"):null))}function bt(e){return ne(e).then((e=>e?e.getConsentStringInfo("default"):null))}function yt(e){return ne(e).then((e=>e?e.getConsentMetadataInfo("default"):null))}var Et=null;var wt=/^[a-zA-Z0-9\-_.]+$/;function At(e){var t=Ot(e);return""===t?"":["1",Tt(t),t].join("*")}function Tt(e,t){var r=(new Date).getTimezoneOffset();var i=window;i=[window.navigator.userAgent,r,i.navigator.userLanguage||i.navigator.language].join("*");r=t||0;var n=Math.floor(Date.now()/6e4)-r;e=[i,n,e].join("*");if(!Et){i=Array(256);for(r=0;256>r;r++){var s=r;for(var a=0;8>a;a++)s=1&s?s>>>1^3988292384:s>>>1;i[r]=s}Et=i}e=He(e);i=4294967295;for(r=0;r<e.length;r++)i=i>>>8^Et[255&(i^e[r])];e=(-1^i)>>>0;return e.toString(36)}function Ot(e){return e?Object.keys(e).filter((e=>{var t=wt.test(e);t||T().error("amp-analytics/linker","Invalid linker key: "+e);return t})).map((t=>t+"*"+Je(String(e[t])))).join("*"):""}var Rt=class{constructor(e){this.l=e;this.ya={}}get(e,t){if(!e||!t)return T().error("amp-analytics/linker-reader","LINKER_PARAM requires two params, name and id"),null;if(!q(this.ya,e)){var r=this.ya;var i=l(this.l.location.search);if(q(i,e)){i=i[e];var n=this.l.location;if(this.l.history.replaceState){var s;s=(s=n.search)&&"?"!=s?(s=s.replace(new RegExp(`[?&]${e}=[^&]*`,"g"),"").replace(/^[?&]/,""))?"?"+s:"":"";this.l.history.replaceState(null,"",n.origin+n.pathname+s+(n.hash||""))}n=i.split("*");s=0==n.length%2;4>n.length||!s?(T().error("amp-analytics/linker",`Invalid linker_param value ${i}`),i=null):(i=Number(n.shift()),1!==i?(T().error("amp-analytics/linker",`Invalid version number ${i}`),i=null):(i=n.shift(),n=n.join("*"),i={checksum:i,serializedIds:n}));if(i){n=i.serializedIds;e:{i=i.checksum;for(s=0;1>=s;s++)if(Tt(n,s)==i){i=!0;break e}i=!1}if(i)for(i={},n=n.split("*"),s=0;s<n.length;s+=2){var a=n[s];if(wt.test(a)){var o=We(String(n[s+1]));"undefined"!==typeof TextDecoder?o=new TextDecoder("utf-8").decode(o):(o=qe(new Uint8Array(o.buffer||o)),o=decodeURIComponent(escape(o)));i[a]=o}else T().error("amp-analytics/linker",`Invalid linker key ${a}, value ignored`)}else T().error("amp-analytics/linker","LINKER_PARAM value checksum not valid"),i=null}else i=null}else i=null;r[e]=i}return this.ya[e]&&this.ya[e][t]?this.ya[e][t]:null}};function St(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,i)}return r}function Pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?St(Object(r),!0).forEach((function(t){var i=r[t];t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):St(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _t=/^(?:([^\s]*)(\([^)]*\))|[^]+)$/,Mt={1:"sufficient",2:"insufficient",3:"not_required",4:"unknown"};var It=class{constructor(e,t,r){this.vars=e;this.iterations=void 0===t?2:t;this.noEncode=!!r;this.freezeVars={}}freezeVar(e){this.freezeVars[e]=!0}getVar(e){e=this.vars[e];null==e&&(e="");return e}};function Nt(e,t,r){t=Number(t);var{length:i}=e;R(p(t),"Start index "+t+"in substr macro should be a number");r&&(i=Number(r),R(p(i),"Length "+i+" in substr macro should be a number"));return e.substr(t,i)}function Ct(e,t){return e&&e.length?e:t}function xt(e,t,r){r||(r="");return e.replace(new RegExp(t,"g"),r)}function Dt(e,t,r){var i=0;r&&(i=parseInt(r,10),0!=i&&!i||0>i)&&(T().error("amp-analytics/variables","Third argument in MATCH macro must be a number >= 0"),i=0);return(e=e.match(new RegExp(t)))&&e[i]?e[i]:""}function jt(e,t){if(t)return(e.__AMP_EXPERIMENT_BRANCHES?e.__AMP_EXPERIMENT_BRANCHES[t]:null)||"";var r=Fe(e);return Object.keys(r).map((e=>`${e}:${r[e]}`)).join(",")}function kt(e,t,r){e.ja[t]=r}function Lt(e,t,r,i,n,s,a,o){return e.expandTemplate(t,new It(r.vars,r.iterations-1,!0),i,s,a).then((t=>n.expandStringAsync(o?t+o:t,s||e.getMacros(i),a)))}var Ut=class{constructor(e){this.m=e;this.ja=B({});this.Xc=S(this.m.win,"amp-analytics-linker-reader");this.ja.$DEFAULT=Ct;this.ja.$SUBSTR=Nt;kt(this,"$TRIM",(e=>e.trim()));kt(this,"$TOLOWERCASE",(e=>e.toLowerCase()));kt(this,"$TOUPPERCASE",(e=>e.toUpperCase()));kt(this,"$NOT",(e=>String(!e)));kt(this,"$BASE64",(e=>Je(e)));kt(this,"$HASH",this.Uc.bind(this));kt(this,"$IF",((e,t,r)=>Gt(e)?t:r));this.ja.$REPLACE=xt;this.ja.$MATCH=Dt;kt(this,"$EQUALS",((e,t)=>e===t));kt(this,"LINKER_PARAM",((e,t)=>this.Xc.get(e,t)));kt(this,"TIMEZONE_CODE",(()=>{var e="";"Intl"in this.m.win&&"DateTimeFormat"in this.m.win.Intl&&(e=(new this.m.win.Intl.DateTimeFormat).resolvedOptions().timeZone);return e}));kt(this,"SCROLL_TOP",(()=>Math.round(se(this.m).getScrollTop())));kt(this,"SCROLL_LEFT",(()=>Math.round(se(this.m).getScrollLeft())));kt(this,"EXPERIMENT_BRANCHES",(e=>jt(this.m.win,e)));kt(this,"AMPDOC_META",((e,t="")=>{var r;return null!==(r=this.m.getMetaByName(e))&&void 0!==r?r:t}))}getMacros(e){var t={COOKIE:t=>{var r=this.m.win;return vt(r,e)?Ye(r,t):null},CONSENT_STATE:Bt(e),CONSENT_STRING:bt(e),CONSENT_METADATA:t=>qt(e,R(t,"CONSENT_METADATA macro must contain a key"))},r=ft(e)?{}:{FIRST_CONTENTFUL_PAINT:()=>re(this.m.win).getMetric("fcpv"),FIRST_VIEWPORT_READY:()=>re(this.m.win).getMetric("pc"),MAKE_BODY_VISIBLE:()=>re(this.m.win).getMetric("mbv"),LARGEST_CONTENTFUL_PAINT:()=>re(this.m.win).getMetric("lcpv"),FIRST_INPUT_DELAY:()=>re(this.m.win).getMetric("fid"),CUMULATIVE_LAYOUT_SHIFT:()=>re(this.m.win).getMetric("cls")};return Pt(Pt(Pt({},this.ja),t),r)}expandTemplate(e,t,r,i,n){return z(e,((e,s)=>{if(0>t.iterations)return T().error("amp-analytics/variables","Maximum depth reached while expanding variables. Please ensure that the variables are not recursive."),e;if(!s)return"";var{name:a,argList:o}=Ft(s);if(t.freezeVars[a])return e;e=t.getVar(a);var l=ie(r);if("string"==typeof e)e=Lt(this,e,t,r,l,i,n,o);else if(d(e)){for(s=0;s<e.length;s++)e[s]="string"==typeof e[s]?Lt(this,e[s],t,r,l,i,n):e[s];e=Promise.all(e)}return Promise.resolve(e).then((e=>t.noEncode?e:Vt(e)))}))}Uc(e){return S(this.m.win,"crypto").sha384Base64(e)}};function Vt(e){if(null==e)return"";if(d(e))return e.map(Vt).join(",");var{name:t,argList:r}=Ft(String(e));return encodeURIComponent(t)+r}function Ft(e){if(!e)return{name:"",argList:""};var t=e.match(_t);R(t,"Variable with invalid format found: "+e);return{name:t[1]||t[0],argList:t[2]||""}}function Ht(e){return P(e,"amp-analytics-variables")}function Bt(e){return gt(e).then((e=>e?Mt[e]:null))}function qt(e,t){return yt(e).then((e=>e?e[t]:null))}function Gt(e){return"false"!==e&&""!==e&&"0"!==e&&"null"!==e&&"NaN"!==e&&"undefined"!==e}function $t(e){var t=e.j.getAttribute("config");if(!t||e.U)return i();De(t,e.j);var r=e.o(),n={};e.j.hasAttribute("data-credentials")&&(n.credentials=e.j.getAttribute("data-credentials"));return ie(e.j).expandUrlAsync(t,e.D.getMacros(e.j)).then((r=>{t=r;return S(e.l,"xhr").fetchJson(t,n)})).then((e=>e.json())).then((t=>{e.ma=t}),(e=>{T().error(r,"Error loading remote config: ",t,e)}))}function Wt(e){var t=e.j.getAttribute("type");if(!t)return i();var r=zt(t),n=e.o();return S(e.l,"xhr").fetchJson(r,{ampCors:!1}).then((e=>e.json())).then((t=>{e.lb=t||{}}),(e=>{T().error(n,"Error loading vendor config: ",r,e)}))}function zt(e){var t=y.cdn;var r;if(r="bg"===e)r=self,r=!(!r.AMP_CONFIG||!r.AMP_CONFIG.canary);var i=r?".canary":"";return`${t}/rtv/${c().rtvVersion}/v0/analytics-vendors/${e}${i}.json`}function Jt(e,t){var r=B({vars:{requestCount:0}});Zt(Qt(e.Nc),r);Zt(Qt(e.lb),r,!0);Zt(Qt(t),r,!0);return r}function Yt(e,t,r){De(r,e.j);var i=e.o();return Kt(e,t).then((()=>{var n={method:"POST",body:t};e.j.hasAttribute("data-credentials")&&(n.credentials=e.j.getAttribute("data-credentials"));return ie(e.j).expandUrlAsync(r).then((t=>S(e.l,"xhr").fetchJson(t,n))).then((e=>e.json())).then((t=>{e.h=Jt(e,t)}),(e=>{T().error(i,"Error rewriting configuration: ",r,e)}))}))}function Kt(e,t){var r=t.configRewriter,n=r&&r.varGroups,s=(e.lb.configRewriter||{}).varGroups;if(!n&&!s)return i();if(n&&!s)return e.o(),i();t.configRewriter=t.configRewriter||{};var a=t.configRewriter;a.vars=B({});var o=[],l=n||{};G(l,s);Object.keys(l).forEach((t=>{var r=l[t];if(r.enabled){var i=e.shallowExpandObject(e.j,r).then((e=>{delete e.enabled;Object.assign(a.vars,e)}));o.push(i)}}));return Promise.all(o).then((()=>{if(!Object.keys(a.vars).length)return delete t.configRewriter;n&&delete a.varGroups}))}var Xt=class{constructor(e){this.j=e;this.l=null;this.Nc=we||{};this.lb={};this.h={};this.ma={};this.U=!1;this.D=Ht(e)}loadConfig(){this.l=this.j.ownerDocument.defaultView;this.U=this.j.hasAttribute("sandbox");return Promise.all([$t(this),Wt(this)]).then(this.gd.bind(this)).then(this.Ic.bind(this)).then((()=>this.h))}gd(){var e=(this.lb.configRewriter||{}).url,t=B({});if(this.j.CONFIG)var r=this.j.CONFIG;else{r={};var n=this.o();try{var s=this.j.children;if(1==s.length){var a=this.j;/^[\w-]+$/.test("script");var o=a.querySelectorAll("> script".replace(/^|,/g,"$&:scope "));if(1!==o.length)throw Error(`Found ${o.length} <script> children. Expected 1.`);var l=o[0];o=l;if("SCRIPT"!=o.tagName||!o.hasAttribute("type")||"APPLICATION/JSON"!=o.getAttribute("type").toUpperCase())throw Error('<script> child must have type="application/json"');try{r=JSON.parse(l.textContent)}catch(e){throw Error("Failed to parse <script> contents. Is it valid JSON?")}}else 1<s.length&&T().error(n,"The tag should contain only one <script> child.")}catch(e){T().error(n,e.message)}}var h=r;this.j.getAttribute("type")&&(h.transport||this.ma.transport)&&(r=this.o(),T().error(r,"Inline or remote config should not overwrite vendor transport settings"));h.transport&&h.transport.iframe&&(T().error("amp-analytics/config","Inline configs are not allowed to specify transport iframe"),h.transport.iframe=void 0);this.ma.transport&&this.ma.transport.iframe&&(T().error("amp-analytics/config","Remote configs are not allowed to specify transport iframe"),this.ma.transport.iframe=void 0);Zt(h,t);Zt(this.ma,t);return!e||this.U?(this.h=Jt(this,t),i()):Yt(this,t,e)}Ic(){this.h.warningMessage&&(this.o(),this.j.getAttribute("type"),this.j.getAttribute("config"),delete this.h.warningMessage)}o(){return"AmpAnalytics "+(this.j.getAttribute("id")||"<unknown id>")}shallowExpandObject(e,t){var r={},i=[],n=[],s=ie(e),a=Ht(e).getMacros(e);Object.keys(t).forEach((e=>{i.push(e);var r=s.expandStringAsync(t[e],a);n.push(r)}));return Promise.all(n).then((e=>{i.forEach(((t,i)=>r[t]=e[i]));return r}))}};function Zt(e,t,r){if(null===t||void 0===t)t={};R(r||!e||!e.optout||"_gaUserPrefs.ioo"==e.optout||"__gaOptOutExtension"==e.optoutElementId,"optout property is only available to vendor config.");for(var i in e)R(r||"iframePing"!=i,"iframePing config is only available to vendor config."),q(e,i)&&(d(e[i])?(d(t[i])||(t[i]=[]),t[i]=Zt(e[i],t[i],r)):m(e[i])?(m(t[i])||(t[i]={}),t[i]=Zt(e[i],t[i],r)):t[i]=e[i]);return t}function Qt(e){if(!e.requests)return e;for(var t in e.requests)if(q(e.requests,t)){var r=e.requests;var i=e.requests[t];i=m(i)?i:{baseUrl:i};r[t]=i}if(q(e,"requests")&&q(e,"requestOrigin")){r=e.requestOrigin;for(var n in e.requests)q(e.requests[n],"origin")||(e.requests[n].origin=r)}return e}var er=class{constructor(){this.H=null}add(e){this.H||(this.H=[]);this.H.push(e);return()=>{this.remove(e)}}remove(e){this.H&&(e=this.H.indexOf(e),-1<e&&this.H.splice(e,1))}removeAll(){this.H&&(this.H.length=0)}fire(e){if(this.H){var t=this.H;for(var r=0;r<t.length;r++)(0,t[r])(e)}}getHandlerCount(){return this.H?this.H.length:0}};var tr={ENDED:"video-ended",PAUSE:"video-pause",PLAY:"video-play",SESSION:"video-session",SESSION_VISIBLE:"video-session-visible",SECONDS_PLAYED:"video-seconds-played",CUSTOM:"video-hosted-custom",PERCENTAGE_PLAYED:"video-percentage-played",AD_START:"video-ad-start",AD_END:"video-ad-end"};function rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,i)}return r}function ir(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(r),!0).forEach((function(t){var i=r[t];t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var nr=/^vars(.+)/;function sr(){}var ar={CLICK:"click",CUSTOM:"custom",HIDDEN:"hidden",INI_LOAD:"ini-load",RENDER_START:"render-start",SCROLL:"scroll",STORY:"story",TIMER:"timer",VIDEO:"video",VISIBLE:"visible"},or=["ampdoc","embed"],lr=Object.freeze({["click"]:{name:"click",allowedFor:or.concat(["timer"]),klass:function(e){return new vr(e)}},["custom"]:{name:"custom",allowedFor:or.concat(["timer"]),klass:function(e){return new mr(e)}},["hidden"]:{name:"visible",allowedFor:or.concat(["timer"]),klass:function(e){return new Pr(e)}},["ini-load"]:{name:"ini-load",allowedFor:or.concat(["timer","visible"]),klass:function(e){return new wr(e)}},["render-start"]:{name:"render-start",allowedFor:or.concat(["timer","visible"]),klass:function(e){return new Er(e)}},["scroll"]:{name:"scroll",allowedFor:or.concat(["timer"]),klass:function(e){return new yr(e)}},["story"]:{name:"story",allowedFor:or,klass:function(e){return new fr(e)}},["timer"]:{name:"timer",allowedFor:or,klass:function(e){return new Or(e)}},["video"]:{name:"video",allowedFor:or.concat(["timer"]),klass:function(e){return new Rr(e)}},["visible"]:{name:"visible",allowedFor:or.concat(["timer"]),klass:function(e){return new Pr(e)}}});function hr(e){return e.startsWith("video")?"video":e.startsWith("story")?"story":f(e)?q(lr,e)?lr[e].name:e:"custom"}function cr(e){var t={};Object.keys(lr).forEach((r=>{q(lr,r)&&-1!=lr[r].allowedFor.indexOf(e)&&(t[r]=lr[r].klass)}));return t}var ur=class{constructor(e,t,r={},i=!0){this.target=e;this.type=t;i&&(e=Q(e,nr),G(e,r,0),r=e);this.vars=r}};var dr=class{constructor(e){this.root=e}dispose(){}add(){}};var mr=class extends dr{constructor(e){super(e);this.M={};this.C={};this.da={};setTimeout((()=>{this.C=void 0}),1e4)}dispose(){this.da=this.C=void 0;for(var e in this.M)this.M[e].removeAll()}add(e,t,r,i){var n=r.selector;n||(n=":root");var s=this.root.getElement(e,n,r.selectionMethod||null),a=t.startsWith("sandbox-"),o=a?this.da&&this.da[t]:this.C&&this.C[t];if(o){var l=o.length;s.then((e=>{setTimeout((()=>{for(var r=0;r<l;r++){var n=o[r];e.contains(n.target)&&i(n)}a&&(this.da[t]=void 0)}),1)}))}var h=this.M[t];h||(h=new er,this.M[t]=h);return this.M[t].add((e=>{s.then((t=>{t.contains(e.target)&&i(e)}))}))}trigger(e){var t=e.type,r=t.startsWith("sandbox-"),i=this.M[t];if(i&&(i.fire(e),r))return;r?(this.da[t]=this.da[t]||[],this.da[t].push(e)):this.C&&(this.C[t]=this.C[t]||[],this.C[t].push(e))}};function pr(e,t,r,i){var n=e.type;e=e.vars;var s=r.storySpec||{},a=void 0===s.repeat?!0:s.repeat,o=e.eventDetails;(r=r.tagName)&&o.tagName&&r.toLowerCase()!==o.tagName||!1===a&&o.repeated||i(new ur(t,n,e))}var fr=class extends mr{constructor(e){super(e)}add(e,t,r,i){var n=this.root.getRootElement();if(e=this.C&&this.C[t]){var s=e.length;for(var a=0;a<s;a++)pr(e[a],n,r,i)}e=this.M[t];e||(e=new er,this.M[t]=e);return this.M[t].add((e=>{pr(e,n,r,i)}))}trigger(e){var t=e.type,r=this.M[t];r&&r.fire(e);this.C&&(this.C[t]=this.C[t]||[],this.C[t].push(e))}};var vr=class extends dr{constructor(e){super(e);this.Ma=new er;this.Rb=this.Ma.fire.bind(this.Ma);this.root.getRoot().addEventListener("click",this.Rb)}dispose(){this.root.getRoot().removeEventListener("click",this.Rb);this.Ma.removeAll()}add(e,t,r,i){t=R(r.selector,"Missing required selector on click trigger");r=r.selectionMethod||null;return this.Ma.add(this.root.createSelectiveListener(this.Qc.bind(this,i),e.parentElement||e,t,r))}Qc(e,t){e(new ur(t,"click"))}};function gr(e){var t=B({});if(!e||!Array.isArray(e))return t;for(var r=0;r<e.length;r++){var i=e[r];if("number"!==typeof i||!isFinite(i)){T().error("amp-analytics/events","Scroll trigger boundaries must be finite.");break}i=Math.min(5*Math.round(i/5),100);t[i]=!1}return t}function br(e,t,r,i,n){if(r)for(var s in t)if(q(t,s)){var a=parseInt(s,10);a>r||t[a]||(t[a]=!0,a={},a[i]=s,n(new ur(e.F.getRootElement(),"scroll",a,!1)))}}var yr=class extends dr{constructor(e){super(e);this.F=e;this.ta=null}dispose(){null!==this.ta&&(this.F.getScrollManager().removeScrollHandler(this.ta),this.ta=null)}add(e,t,r,i){if(!r.scrollSpec)return T().error("amp-analytics/events","Missing scrollSpec on scroll trigger."),sr;if(!Array.isArray(r.scrollSpec.verticalBoundaries)&&!Array.isArray(r.scrollSpec.horizontalBoundaries))return T().error("amp-analytics/events","Boundaries are required for the scroll trigger to work."),sr;var n=gr(r.scrollSpec.verticalBoundaries),s=gr(r.scrollSpec.horizontalBoundaries);this.ta=this.jd.bind(this,s,n,!!r.scrollSpec.useInitialPageSize,i);return this.F.getScrollManager().addScrollHandler(this.ta)}jd(e,t,r,i,n){var{scrollWidth:s,scrollHeight:a}=r?n.initialSize:n;br(this,t,100*(n.top+n.height)/a,"verticalScrollBoundary",i);br(this,e,100*(n.left+n.width)/s,"horizontalScrollBoundary",i)}};var Er=class extends dr{constructor(e){super(e)}dispose(){}add(e,t,r,i){var n,s;var a=r.selector||":root";":root"==a||":host"==a?(n=this.root.getRootElement(),s=this.getRootSignal(t)):s=this.root.getAmpElement(e.parentElement||e,a,r.selectionMethod).then((e=>{n=e;return this.getElementSignal(t,n)}));s.then((()=>{i(new ur(n,t))}));return sr}getRootSignal(e){return this.root.signals().whenSignal(e)}getElementSignal(e,t){return"function"!=typeof t.signals?i():t.signals().whenSignal(e)}};var wr=class extends dr{constructor(e){super(e)}dispose(){}add(e,t,r,i){var n;var s=r.selector||":root";":root"==s||":host"==s?(n=this.root.getRootElement(),e=this.getRootSignal()):e=this.root.getAmpElement(e.parentElement||e,s,r.selectionMethod).then((e=>{n=e;return this.getElementSignal("ini-load",n)}));e.then((()=>{i(new ur(n,t))}));return sr}getRootSignal(){return this.root.whenIniLoaded()}getElementSignal(e,t){if("function"!=typeof t.signals)return i();var r=t.signals();return Promise.race([r.whenSignal("ini-load"),r.whenSignal("load-end")])}};var Ar=class{constructor(e,t,r){this.Za=void 0;R("interval"in e,"Timer interval specification required");this.hc=Number(e.interval)||0;R(.5<=this.hc,"Bad timer interval specification");this.kc="maxTimerLength"in e?Number(e.maxTimerLength):7200;R(0<this.kc,"Bad maxTimerLength specification");this.Yc="maxTimerLength"in e;this.Gc="immediate"in e?!!e.immediate:!0;this.ea=this.Y=this.wb=null;this.Fa=t||null;this.jb=r||null;this.ab=this.W=void 0}init(e){this.Fa?this.Fa&&(this.Y=this.Fa()):e()}dispose(){this.ea&&(this.ea(),this.ea=null);this.Y&&(this.Y(),this.Y=null)}isRunning(){return!!this.Za}startIntervalInWindow(e,t,r){if(!this.isRunning()&&(this.W=Date.now(),this.ab=void 0,this.wb=t,this.Za=e.setInterval((()=>{t()}),1e3*this.hc),(!this.jb||this.jb&&this.Yc)&&e.setTimeout((()=>{r()}),1e3*this.kc),this.Y&&(this.Y(),this.Y=null),this.Gc&&t(),this.jb))try{this.ea=this.jb()}catch(e){throw this.dispose(),e}}kb(e){this.isRunning()&&(this.wb(),this.wb=null,e.clearInterval(this.Za),this.ab=this.Za=void 0,this.ea&&(this.ea(),this.ea=null),this.Fa&&(this.Y=this.Fa()))}getTimerVars(){var e=0;this.isRunning()&&(e=this.W?Date.now()-(this.ab||this.W):0,this.ab=Date.now());return B({timerDuration:e,timerStart:this.W||0})}};function Tr(e,t){t=T().assertString(t.on);var r=hr(t);return e.root.getTrackerForAllowlist(r,cr("timer"))}var Or=class extends dr{constructor(e){super(e);this.B={};this.nd=1}getTrackedTimerKeys(){return Object.keys(this.B)}dispose(){this.getTrackedTimerKeys().forEach((e=>{this.Db(e)}))}add(e,t,r,i){r=r.timerSpec;R(r&&"object"==typeof r,"Bad timer specification");var n="startSpec"in r?r.startSpec:null;R(!n||"object"==typeof n,"Bad timer start specification");var s="stopSpec"in r?r.stopSpec:null;R(!n&&!s||"object"==typeof s,"Bad timer stop specification");var a=++this.nd;var o,l;if(n){var h=Tr(this,n);R(h,"Cannot track timer start");o=h.add.bind(h,e,n.on,n,this.ac.bind(this,a,t,i))}if(s){var c=Tr(this,s);R(c,"Cannot track timer stop");l=c.add.bind(c,e,s.on,s,this.ac.bind(this,a,t,i))}var u=new Ar(r,o,l);this.B[a]=u;u.init(this.vc.bind(this,a,t,i));return()=>{this.Db(a)}}ac(e,t,r){var i=this.B[e];i&&(i.isRunning()?this.kb(e):this.vc(e,t,r))}vc(e,t,r){this.B[e].startIntervalInWindow(this.root.ampdoc.win,(()=>{var i=new ur(this.root.getRootElement(),t,this.B[e].getTimerVars(),!1);r(i)}),this.Db.bind(this,e))}kb(e){this.B[e].kb(this.root.ampdoc.win)}Db(e){this.B[e]&&(this.kb(e),this.B[e].dispose(),delete this.B[e])}};var Rr=class extends dr{constructor(e){super(e);this.ib=new er;this.rb=this.ib.fire.bind(this.ib);Object.keys(tr).forEach((e=>{this.root.getRoot().addEventListener(tr[e],this.rb)}))}dispose(){var e=this.root.getRoot();Object.keys(tr).forEach((t=>{e.removeEventListener(tr[t],this.rb)}));this.ib=this.rb=null}add(e,t,r,i){var n=r.videoSpec||{},s=this.root.getElement(e,r.selector||n.selector,r.selectionMethod||null),a=n["end-session-when-invisible"],o=n["exclude-autoplay"],l=n.interval,h=n.percentages,c=r.on;var u=0,d=0;return this.ib.add((e=>{var t=e.type,r=e.data,n="video-session-visible"==t?"video-session":"video-hosted-custom"==t?r["__amp:eventType"]:t;if(n===c)if("video-seconds-played"!==n||l){if("video-seconds-played"===n&&(u++,0!==u%l))return;if("video-percentage-played"===n){if(!h){T().error("amp-analytics/events","video-percentage-played requires percentages spec.");return}for(var m=0;m<h.length;m++){var f=h[m];if(0>=f||0!=f%5){T().error("amp-analytics/events","Percentages must be set in increments of %s with non-zero values",5);return}}var v=parseInt(r.normalizedPercentage,10);p(v);if(d==v&&1<h.length||0>h.indexOf(v))return;d=v}if("video-session-visible"!==t||a)if(!o||"playing_auto"!==r.state){var g=e.target;s.then((e=>{if(e.contains(g)){if(r){var t=ir({},r);delete t["__amp:eventType"];var s=t}else s={};i(new ur(e,n,s))}}))}}else T().error("amp-analytics/events","video-seconds-played requires interval spec with non-zero value")}))}};function Sr(e){if(d(e)){var t={};for(var r=0;r<e.length;r++)R(!t[e[r]],"Cannot have duplicate selectors in selectors list: %s",e),t[e[r]]=e[r]}}var Pr=class extends dr{constructor(e){super(e);this.zc={}}dispose(){}add(e,t,r,i){var n=r.visibilitySpec||{},s=r.selector||n.selector,a=n.waitFor;var o=n.reportWhen,l=null;o&&R(!n.repeat,"reportWhen and repeat are mutually exclusive.");"hidden"===t&&(o&&T().error("amp-analytics/events",'ReportWhen should not be defined when eventType is "hidden"'),o="documentHidden");var h=this.root.getVisibilityManager();"documentHidden"==o?l=this.Kc.bind(this):"documentExit"==o?l=this.Jc.bind(this):R(!o,'reportWhen value "%s" not supported.',o);if(!s||":root"==s||":host"==s)return h.listenRoot(n,this.getReadyPromise(a||(s?"ini-load":"none")),l,this.lc.bind(this,t,i,this.root.getRootElement()));r=r.selectionMethod||n.selectionMethod;Sr(s);var c=this.root.getElements(e.parentElement||e,s,r).then((e=>{var r=[];for(var s=0;s<e.length;s++)r.push(h.listenElement(e[s],n,this.getReadyPromise(a,e[s]),l,this.lc.bind(this,t,i,e[s])));return r}));return function(){c.then((e=>{for(var t=0;t<e.length;t++)e[t]()}))}}Kc(){var e=this.root.ampdoc;return e.isVisible()?new Promise((t=>{e.onVisibilityChanged((()=>{e.isVisible()||t()}))})):i()}Jc(){var e=new n,t=this.root.ampdoc.win;var r,i;"onpagehide"in this.root.ampdoc.win||t.addEventListener("unload",r=()=>{t.removeEventListener("unload",r);e.resolve()});t.addEventListener("pagehide",i=()=>{t.removeEventListener("pagehide",i);e.resolve()});return e.promise}getReadyPromise(e,t){if(t){var r=t.tagName;(r=r.startsWith("AMP-")&&!("AMP-STICKY-AD-TOP-PADDING"==r||"AMP-BODY"==r))?e=e||"ini-load":R(!e||"none"==e,"waitFor for non-AMP elements must be none or null. Found %s",e)}if(!e||"none"==e)return null;var i=cr("visible");R(void 0!==i[e],"waitFor value %s not supported",e);var n=this.zc[e]||this.root.getTrackerForAllowlist(e,i);if(n)this.zc[e]=n;else return null;return t?n.getElementSignal(e,t):n.getRootSignal(e)}lc(e,t,r,i){var n=Q(r,nr);for(var s in n)i[s]=n[s];t(new ur(r,e,i,!1))}};var _r=!1;var Mr=class{constructor(){this.I=[]}peek(){var e=this.I.length;return e?this.I[e-1].item:null}enqueue(e,t){if(isNaN(t))throw Error("Priority must not be NaN.");var r=-1;var i=0,n=this.I.length;for(;i<=n;){r=Math.floor((i+n)/2);if(r===this.I.length)break;if(this.I[r].priority<t)i=r+1;else if(0<r&&this.I[r-1].priority>=t)n=r-1;else break}this.I.splice(r,0,{item:e,priority:t})}forEach(e){var t=this.I.length;for(;t--;)e(this.I[t].item)}dequeue(){return this.I.length?this.I.pop().item:null}get length(){return this.I.length}};var Ir=/nochunking=1/.test(self.location.hash);var Nr=i();function Cr(e,t,r){if(Ir)Nr.then(t);else{var i=Fr;var n=C(e),s=x(n);j(s,n,"chunk",i);P(e,"chunk").run(t,r)}}function xr(e,t){if("run"!=e.state){e.state="run";try{e.ub(t)}catch(t){throw e.mc(),t}}}var Dr=class{constructor(e){this.state="not_run";this.ub=e}o(){return this.ub.displayName||this.ub.name}mc(){}cc(){return!1}xc(){return!1}};var jr=class extends Dr{constructor(e,t){super(e);this.Ub=t}mc(){var e=self.document;if(!_r){_r=!0;e=e.body;var t={opacity:1,visibility:"visible",animation:"none"};for(var r in t){var i=e,n=t[r];e:{var s=i.style;var a=r;if(a.startsWith("--")){s=a;break e}nt||(nt=Object.create(null));var o=nt[a];if(!o){o=a;if(void 0===s[a]){var l=a;l=l.charAt(0).toUpperCase()+l.slice(1);t:{for(var h=0;h<st.length;h++){var c=st[h]+l;if(void 0!==s[c]){l=c;break t}}l=""}void 0!==s[l]&&(o=l)}nt[a]=o}s=o}s&&(s.startsWith("--")?i.style.setProperty(s,n):i.style[s]=n)}}}cc(){return this.Ub.ampdoc.isVisible()}xc(){return this.Ub.Wb}};function kr(e){if(!e.hb){var t=Lr(e);t&&(t.cc()?(e.hb=!0,Vr(e)):t.xc()&&e.l.requestIdleCallback?Hr(e.l,e.Pb):Ur(e))}}function Lr(e,t){var r=e.oa.peek();for(;r&&"not_run"!==r.state;)e.oa.dequeue(),r=e.oa.peek();r&&t&&e.oa.dequeue();return r}function Ur(e){e.l.postMessage("amp-macro-task","*")}function Vr(e){e.Bc&&(e.md?e.l.navigator.scheduling.isInputPending():5<e.va)?(e.va=0,Ur(e)):Nr.then((()=>{e.Pb(null)}))}var Fr=class{constructor(e){this.ampdoc=e;this.l=e.win;this.oa=new Mr;this.Pb=this.Yb.bind(this);this.va=0;this.md=!(!this.l.navigator.scheduling||!this.l.navigator.scheduling.isInputPending);this.hb=!1;this.Bc=this.l.document.documentElement.hasAttribute("i-amphtml-no-boilerplate");this.l.addEventListener("message",(e=>{"amp-macro-task"==e.data&&this.Yb(null)}));this.Wb=!1;k(x(e),"viewer").then((()=>{this.Wb=!0}));e.onVisibilityChanged((()=>{e.isVisible()&&kr(this)}))}run(e,t){e=new Dr(e);this.oa.enqueue(e,t);kr(this)}runForStartup(e){e=new jr(e,this);this.oa.enqueue(e,Number.POSITIVE_INFINITY);kr(this)}Yb(e){var t=Lr(this,!0);if(!t)return this.hb=!1,this.va=0,!1;var r;try{r=Date.now(),xr(t,e)}finally{Nr.then().then().then().then().then().then().then().then().then((()=>{this.hb=!1;this.va+=Date.now()-r;kr(this)}))}return!0}};function Hr(e,t){function r(n){if(15>n.timeRemaining()){var s=2e3-(Date.now()-i);0>=s||n.didTimeout?t(n):e.requestIdleCallback(r,{timeout:s})}else t(n)}var i=Date.now();e.requestIdleCallback(r,{timeout:2e3})}var Br=class{constructor(e,t){this.F=e;this.Nb=t;this.jc=[];this.Jb=0;this.l=t.ownerDocument.defaultView}dispose(){this.jc.forEach((e=>{e()}))}addTrigger(e,t){var r=e.on;var i=hr(r);var s=cr(this.F.getType()),a=this.F.getTrackerForAllowlist(i,s);R(!!a,'Trigger type "%s" is not allowed in the %s',r,this.F.getType());var o;var l=new n;i=()=>{o=a.add(this.Nb,r,e,t);this.jc.push(o);l.resolve()};1>this.Jb||!qr(this.l)?i():Cr(this.Nb,i,3>this.Jb?20:10);this.Jb++;return l.promise}};function qr(e){return"inabox"==c(e).runtime?!!Ue(e)["analytics-chunks-inabox"]:!0}var Gr={referrerDomains:!0,enabled:!0,cookiePath:!0,cookieMaxAge:!0,cookieSecure:!0,cookieDomain:!0,sameSite:!0,SameSite:!0,secure:!0};function $r(e){if(!vt(e.l,e.j)||!q(e.h,"cookies"))return i();if(!m(e.h.cookies))return T().error("amp-analytics/cookie-writer","cookies config must be an object"),i();var t=e.h.cookies;if(!1===t.enabled)return i();var r;q(t,"cookieMaxAge")?(r=Number(t.cookieMaxAge))||0===r?r*=1e3:(T().error("amp-analytics/cookie-writer","invalid cookieMaxAge %s, falling back to default value (1 year)",t.cookieMaxAge),r=31536e6):r=31536e6;var n=r;r=Object.keys(t);var s=[];for(var a=0;a<r.length;a++){var o=r[a],l=t[o];e:{switch(l.sameSite||l.SameSite||t.sameSite||t.SameSite){case"Strict":var h="Strict";break e;case"Lax":h="Lax";break e;case"None":h="None";break e}h=void 0}var c=l;Gr[o]?c=!1:m(c)?q(c,"value")?c=!0:(T().error("amp-analytics/cookie-writer","value is required in the cookieValue object"),c=!1):(T().error("amp-analytics/cookie-writer","cookieValue must be configured in an object"),c=!1);c&&s.push(Wr(e,o,l.value,n,h))}return Promise.all(s)}function Wr(e,t,r,i,n){return e.Ha.expandStringAsync(r,e.Ac).then((r=>{if(r){var s=Date.now()+i;Xe(e.l,t,r,s,{highestAvailableDomain:!0,sameSite:n,secure:"None"===n})}})).catch((e=>{T().error("amp-analytics/cookie-writer","Error expanding cookie string",e)}))}var zr=class{constructor(e,t,r){this.l=e;this.j=t;this.Ha=ie(t);this.mb=null;this.h=r;this.Ac=Ht(t).getMacros(t)}write(){if(!this.mb){this.mb=new n;var e=()=>{this.mb.resolve($r(this))};qr(this.l)?Cr(this.j,e,10):e()}return this.mb.promise}};function Jr(e){var t=e.Zc.measureElement((()=>e.S.getLayoutRect(e.F)));e.Ya=e.Ya||t;return t}var Yr=class{constructor(e){this.S=se(e.ampdoc);this.Zc=P(e.ampdoc,"mutator");this.ga=null;this.na=new er;this.F=e.getRootElement();this.Ya=null}dispose(){this.na.removeAll();this.ga&&(this.ga(),this.ga=null)}removeScrollHandler(e){this.na.remove(e);0>=this.na.getHandlerCount()&&this.ga&&(this.ga(),this.ga=null)}addScrollHandler(e){var t=this.S.getSize();(this.Ya||Jr(this)).then((r=>{var i=r.top,n=r.left,s=r.width,a=r.height,o={top:this.S.getScrollTop()-i,left:this.S.getScrollLeft()-n,width:t.width,height:t.height,scrollHeight:a,scrollWidth:s,initialSize:{scrollHeight:a,scrollWidth:s}};e(o)}));0===this.na.getHandlerCount()&&(this.ga=this.S.onChanged(this.cd.bind(this)));return this.na.add(e)}cd(e){return Promise.all([this.Ya||Jr(this),Jr(this)]).then((t=>{var{height:r,width:i}=t[0],{top:n,left:s,width:a,height:o}=t[1];this.na.fire({top:e.top-n,left:e.left-s,width:e.width,height:e.height,scrollWidth:a,scrollHeight:o,initialSize:{scrollHeight:r,scrollWidth:i}})}))}};function Kr(e,t,r,i){return{left:e,top:t,width:r,height:i,bottom:t+i,right:e+r,x:e,y:t}}function Xr(e,t,r){r={top:r,bottom:r+t.getHeight(),left:0,right:t.getWidth()};r=Kr(Number(r.left),Number(r.top),Number(r.width),Number(r.height));return e.top<=r.bottom&&r.top<=e.bottom&&e.left<=r.right&&r.left<=e.right?"inside":e.top<r.top?"top":e.bottom>r.bottom?"bottom":"inside"}var Zr=class{generateRequest(e,t,r=!1){return r?{url:e.replace("${extraUrlParams}",""),payload:JSON.stringify(t.extraUrlParams)}:{url:ei(e,[t])}}generateBatchRequest(e,t,r=!1){return r?{url:e.replace("${extraUrlParams}",""),payload:JSON.stringify(t.map((e=>e.extraUrlParams)))}:{url:ei(e,t)}}};var Qr={"default":new Zr};function ei(e,t){var r=t.map((e=>xe(e.extraUrlParams))).filter((e=>!!e)).join("&");return 0<=e.indexOf("${extraUrlParams}")?e.replace("${extraUrlParams}",r):Ce(e,r)}var ti={AMPDOC_HOST:!0,AMPDOC_HOSTNAME:!0,AMPDOC_URL:!0,AMP_VERSION:!0,AVAILABLE_SCREEN_HEIGHT:!0,AVAILABLE_SCREEN_WIDTH:!0,BACKGROUND_STATE:!0,BROWSER_LANGUAGE:!0,CANONICAL_HOST:!0,CANONICAL_HOSTNAME:!0,CANONICAL_PATH:!0,CANONICAL_URL:!0,DOCUMENT_CHARSET:!0,FIRST_CONTENTFUL_PAINT:!0,FIRST_VIEWPORT_READY:!0,MAKE_BODY_VISIBLE:!0,RANDOM:!0,SCREEN_COLOR_DEPTH:!0,SCREEN_HEIGHT:!0,SCREEN_WIDTH:!0,SOURCE_HOST:!0,SOURCE_HOSTNAME:!0,SOURCE_PATH:!0,SOURCE_URL:!0,TIMESTAMP:!0,TIMEZONE:!0,TIMEZONE_CODE:!0,USER_AGENT:!0,VIEWPORT_HEIGHT:!0,VIEWPORT_WIDTH:!0};function ri(e){return new Promise((t=>{setTimeout((()=>t(e())))}))}function ii(e){return!(m(e.resources)&&e.encoding&&e.encoding.entry&&e.encoding.delim)||2>e.encoding.base||36<e.encoding.base||null!=e.responseAfter&&"number"!=typeof e.responseAfter?!1:!0}function ni(e,t){var r=e.name;for(e=0;e<t.length;++e){var{hostPattern:i,resources:n}=t[e];if(!i.test(r.host))continue;var s=it(n,(e=>e.pathPattern.test(r.pathname)&&e.queryPattern.test(r.search)));if(-1!=s)return n[s].name}return null}function si(e){var t={};for(var r in e){var i=e[r].host||"",n={name:r,pathPattern:new RegExp(e[r].path||""),queryPattern:new RegExp(e[r].query||"")};t[i]?t[i].resources.push(n):t[i]={hostPattern:new RegExp(i),resources:[n]}}var s=[];for(var a in t)s.push(t[a]);return s}function ai(e,t){var r=si(t),i=[];e.forEach((e=>{var t=ni(e,r);t&&i.push({entry:e,name:t})}));return i}function oi(e,t,r){var i=t.resources,n=t.encoding,s=Ht(r),a=(e,t=0)=>Math.round(e-t).toString(n.base||10);e=ai(e,i).map((e=>{var t=e.entry;t={key:e.name,startTime:a(t.startTime),redirectTime:a(t.redirectEnd,t.redirectStart),domainLookupTime:a(t.domainLookupEnd,t.domainLookupStart),tcpConnectTime:a(t.connectEnd,t.connectStart),serverResponseTime:a(t.responseStart,t.requestStart),networkTransferTime:a(t.responseEnd,t.responseStart),transferSize:a(t.transferSize||0),encodedBodySize:a(t.encodedBodySize||0),decodedBodySize:a(t.decodedBodySize||0),duration:a(t.duration),initiatorType:t.initiatorType};return t=new It(t,1)})).map((e=>s.expandTemplate(n.entry,e,r)));return Promise.all(e).then((e=>e.join(n.delim)))}function li(e,t){var{win:r}=e.getAmpDoc();if(t.done||!r.performance||!r.performance.now||!r.performance.getEntriesByType||!ii(t))return t.done=!0,Promise.resolve("");var i=r.performance.getEntriesByType("resource");150<=i.length&&(t.done=!0);var n=t.responseAfter||0;t.responseAfter=Math.max(n,r.performance.now());i=i.filter((e=>e.startTime+e.duration>=n));return i.length?ri((()=>oi(i,t,e))):Promise.resolve("")}function hi(e,t,r){return t&&Date.now()<r+6e4?li(e,t):Promise.resolve("")}function ci(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,i)}return r}function ui(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ci(Object(r),!0).forEach((function(t){var i=r[t];t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ci(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function di(e){e.rc&&(e.cb=e.win.setTimeout((()=>{0!=e.Ca&&mi(e);e.qc=!1;e.Z&&(e.win.clearTimeout(e.Z),e.Z=null)}),1e3*e.rc))}function mi(e){var t=e.Fb,r=e.Ka,i=e.Ja,n=e.qb,s=e.Ab;e.eb();(t?t:r).then((t=>{e.fd.url(e.m,t,!0)}));Promise.all([i,Promise.all(n),t]).then((t=>{var r=t[0];var i=t[2];r=i?e.qa.parse(i).origin+r:r;t=t[1];if(0!==t.length){if(e.Pa){try{e:{var n=e.Pa;if(m(n)){var a=Ne(r);if("pagead2.googlesyndication.com"==a.hostname){var o=l(a.search);if("ampim"==o.id){var h=o.d&&o.d.split(","),c=o.bs&&o.bs.split(",");if(d(h)){var u=Number(h[0]),p=Number(h[1]);if(0==u||0==p){if(.1<Math.random())break e;O().expectedError("active-view-debug","Debugging: Activeview request with zero element size",u,p,r,JSON.stringify(n))}}if(d(c)){var f=Number(c[0]),v=Number(c[1]);0!=f&&0!=v||.1<Math.random()||O().expectedError("active-view-debug","Debugging: Activeview request with zero viewport size",f,v,r,JSON.stringify(n))}}}}}}catch(e){O().error("active-view-debug",e)}e.Pa=null}s.iframePing?(R("visible"==s.on,"iframePing is only available on page view requests."),e.X.sendRequestUsingIframe(r,t[0])):e.X.sendRequest(r,t,!!e.A)}}))}function pi(e){var t=e.pb<e.A.length?e.A[e.pb++]:e.A[e.A.length-1];e.Z=e.win.setTimeout((()=>{0!=e.Ca&&mi(e);pi(e)}),t)}var fi=class{constructor(e,t,r,i,n){this.j=e;this.m=e.getAmpDoc();this.win=this.m.win;this.sc=t.origin;this.baseUrl=t.baseUrl;this.A=t.batchInterval;this.rc=Number(t.reportWindow)||null;this.pb=null;this.D=Ht(e);this.Ha=ie(e);this.qa=_(e,"url");this.Fb=this.Ka=this.Ja=null;this.qb=[];this.fd=r;this.X=i;this.ra=n?ti:void 0;this.cb=this.Z=null;this.qc=!0;this.Ab=null;this.Ca=0;this.W=Date.now();this.Pa=null;di(this);if(this.A){this.A=d(this.A)?this.A:[this.A];for(e=0;e<this.A.length;e++)t=this.A[e],R(p(t),"Invalid batchInterval value: %s",this.A),t=1e3*Number(t),R(200<=t,"Invalid batchInterval value: %s, interval value must be greater than %s ms.",this.A,200),this.A[e]=t;this.pb=0;pi(this)}}send(e,t,r){var i=!0===t.important;if(this.qc||i){r.getVar("_avError_")&&(this.Pa=r.getVar("_avError_"),delete r.vars._avError_);this.Ca++;this.Ab=t;var n=this.D.getMacros(this.j);n.RESOURCE_TIMING=hi(this.j,t.resourceTimingSpec,this.W);this.Ja||(r.freezeVar("extraUrlParams"),this.Ka=this.D.expandTemplate(this.baseUrl,r,this.j,n,this.ra),this.Ja=this.Ka.then((e=>this.Ha.expandUrlAsync(e,n,this.ra))));if(!this.Fb&&this.sc){var s=new It(r.vars,r.iterations,!0);this.Fb=this.D.expandTemplate(this.sc,s,this.j,n,this.ra).then((e=>this.Ha.expandUrlAsync(e,n,this.ra,!0)))}var a=ui(ui({},e),t.extraUrlParams),o=this.win.Date.now(),l=gi(this.D,this.Ha,a,r,n,this.j,this.ra).then((e=>B({trigger:t.on,timestamp:o,extraUrlParams:e})));this.qb.push(l);0==this.Ca||!i&&this.A||mi(this)}}dispose(){this.eb();this.Z&&(this.win.clearTimeout(this.Z),this.Z=null);this.cb&&(this.win.clearTimeout(this.cb),this.cb=null)}eb(){this.Ca=0;this.Ka=this.Ja=null;this.qb=[];this.Ab=null}};function vi(e,t,r,i,n,s){var a=Ht(e),o=ie(s),l=a.getMacros(s);n.freezeVar("extraUrlParams");var h=a.expandTemplate(t,n,s).then((e=>o.expandStringAsync(e,l)));return 0>t.indexOf("${extraUrlParams}")?h:h.then((e=>{var t=ui(ui({},r),i.extraUrlParams);return gi(a,o,t,n,l,s).then((t=>ei(e,[B({extraUrlParams:t})])))}))}function gi(e,t,r,i,n,s,a){var o={},l=[],h=new It(i.vars,i.iterations,!0),c=(r,i,o)=>{r=r[i];if("string"===typeof r)o[i]=void 0,r=e.expandTemplate(r,h,s).then((e=>t.expandStringAsync(e,n,a))).then((e=>{o[i]=e})),l.push(r);else if(d(r)){o[i]=[];for(var u=0;u<r.length;u++)c(r,u,o[i])}else if(m(r)&&null!==r){o[i]={};var p=Object.keys(r);for(u=0;u<p.length;u++)c(r,p[u],o[i])}else o[i]=r},u=Object.keys(r);for(i=0;i<u.length;i++)c(r,u[i],o);return Promise.all(l).then((()=>o))}function bi(e,t){if(e.Lb)yi(e,t)||e.eb();else if(e.ia)if(Ei(e,t)||e.Vc){if(e.J&&(clearTimeout(e.J),e.J=null),e.Eb)e.ia(),e.ia=null,e.pc&&(e.Lb=!0,e.T=0);else if(e.Na){var r=e.Na();e.Na=null;r.then((()=>{e.Eb=!0;e.update()}))}}else if(e.ka&&!e.J){var i=wi(e);0<i&&(e.J=setTimeout((()=>{e.J=null;e.update()}),i))}else!e.ka&&e.J&&(clearTimeout(e.J),e.J=null)}function yi(e,t){return 1==e.L.visiblePercentageMin?1==t:0==e.L.visiblePercentageMax?0==t:t>e.L.visiblePercentageMin&&t<=e.L.visiblePercentageMax}function Ei(e,t){var r=Date.now();0<t&&(e.Sa=e.Sa||r,e.zb=r,!e.Bb&&300>r-e.Lc&&(e.Bb=t));var i=e.ka,n=e.wa?r-e.wa:0;e.ka=yi(e,t);if(e.ka){e.tb=!0;i?(e.P+=n,e.T+=n,e.V=Math.max(e.V,e.T)):e.Ta=e.Ta||r;e.wa=r;e.Aa=0<e.Aa?Math.min(e.Aa,t):t;if(t>e.za)try{e.Tb&&(e.Oa.layoutBoxAtMaxRatio=e.Tb()),e.Sb&&(e.Oa.boundingClientRectAtMaxRatio=e.Sb()),e.yc&&(e.Oa.viewportSizeAtMaxRatio=e.yc.getSize())}catch(e){O().error("active-view-debug",e)}e.za=Math.max(e.za,t);e.bb=r}else i&&(e.V=Math.max(e.V,e.T+n),e.wa=0,e.P+=n,e.T=0,e.bb=r);return e.tb&&e.P>=e.L.totalTimeMin&&e.P<=e.L.totalTimeMax&&e.V>=e.L.continuousTimeMin&&e.V<=e.L.continuousTimeMax}function wi(e){var t=Math.max(e.L.continuousTimeMin-e.T,0),r=Math.max(e.L.totalTimeMin-e.P,0);return Math.min(Math.max(t,r),t||1/0,r||1/0)}var Ai=class{constructor(e,t,r=null,i=null,s=null){this.Fc=t;this.Tb=r;this.Sb=i;this.yc=s;this.Oa=B({});this.L=B({visiblePercentageMin:Number(e.visiblePercentageMin)/100||0,visiblePercentageMax:Number(e.visiblePercentageMax)/100||1,totalTimeMin:Number(e.totalTimeMin)||0,totalTimeMax:Number(e.totalTimeMax)||1/0,continuousTimeMin:Number(e.continuousTimeMin)||0,continuousTimeMax:Number(e.continuousTimeMax)||1/0});"0"===String(e.visiblePercentageMax).trim()&&(this.L.visiblePercentageMax=0);this.Vc=void 0!==e.reportWhen;this.pc=!0===e.repeat;this.ca=new er;e=new n;this.Qa=e.promise;this.ia=e.resolve;this.Qa.then((()=>{this.ca.fire()}));this.fa=[];this.Lc=Date.now();this.Eb=this.nc=!0;this.J=this.Na=null;this.tb=this.ka=!1;this.ec=this.wa=this.za=this.Aa=this.Bb=this.bb=this.Ta=this.zb=this.Sa=this.P=this.V=this.T=0;this.Lb=this.dc=!1;this.gb=null}eb(){var e=new n;this.Qa=e.promise;this.ia=e.resolve;this.Qa.then((()=>{this.ca.fire()}));this.gb=null;this.ka=this.tb=!1;this.wa=this.za=this.Aa=this.bb=this.zb=this.Sa=this.Ta=this.P=this.V=this.T=0;this.Lb=!1}maybeDispose(){this.pc||this.dispose()}dispose(){this.J&&(clearTimeout(this.J),this.J=null);this.gb&&(clearTimeout(this.gb),this.gb=null);this.fa.forEach((e=>{e()}));this.fa.length=0;this.ia=null;this.ca&&(this.ca.removeAll(),this.ca=null)}unsubscribe(e){this.fa.push(e)}onTriggerEvent(e){this.ca&&this.ca.add(e);this.Qa&&!this.ia&&e()}setReady(e){this.nc=e;this.update()}setReportReady(e){this.Eb=!1;this.Na=e}update(){bi(this,this.nc?this.Fc():0)}getState(e){return B({firstSeenTime:Ti(this.Sa,e),lastSeenTime:Ti(this.zb,e),lastVisibleTime:Ti(this.bb,e),firstVisibleTime:Ti(this.Ta,e),maxContinuousVisibleTime:this.V,totalVisibleTime:this.P,loadTimeVisibility:100*this.Bb||0,minVisiblePercentage:100*this.Aa,maxVisiblePercentage:100*this.za})}getErrorInfoTemp(){return this.Oa}maybeSetInitialScrollDepth(e){this.dc||(this.ec=e,this.dc=!0)}getInitialScrollDepth(){return this.ec}};function Ti(e,t){return e>=t?e-t:0}function Oi(e){var t=e.parentElement;var r=[];if(t){var i=t;r.push(i);for(var n=0;50>n;n++)if((t=i.parentNode||i.parentElement)&&1==t.nodeType)i=t,r.push(i);else if(t&&9==t.nodeType)if((t=i.ownerDocument.defaultView.frameElement)&&1==t.nodeType)i=t,r.push(i);else break;else break}r.push(e);var s,a=1;for(e=0;e<r.length;e++){e:{t=r[e];if(!t){s=1;break e}var{visibility:o,opacity:l}=window.getComputedStyle(t)||Object.create(null);"hidden"===o?s=0:(t=""===l?1:parseFloat(l),s=isNaN(t)?1:t)}s<a&&(a=s);if(0===a)break}return a}var Ri=[0,.05,.1,.15,.2,.25,.3,.35,.4,.45,.5,.55,.6,.65,.7,.75,.8,.85,.9,.95,1];var Si=1;function Pi(e){var t=e.__AMP_VIS_ID;t||(t=++Si,e.__AMP_VIS_ID=t);return t}function _i(e){if(!e.__AMP_VIS){var t=C(e);var r=N(e),i=r&&r.__AMP_EMBED__;var n;if(n=r)if(n=r,Node.prototype.getRootNode)n=n.getRootNode()||n;else for(;n.parentNode&&(!n||"I-AMPHTML-SHADOW-ROOT"!=n.tagName&&(11!=n.nodeType||"[object ShadowRoot]"!==Object.prototype.toString.call(n)));n=n.parentNode);t=i&&n?new ki(_i(n),i):new ji(t);e.__AMP_VIS=t}return e.__AMP_VIS}function Mi(e,t){e.G||(e.G=[]);e.G.push(t)}function Ii(e,t){e.G&&(t=e.G.indexOf(t),-1!=t&&e.G.splice(t,1))}function Ni(e){for(var t=0;t<e.ba.length;t++)e.ba[t].update()}function Ci(e,t,r,i,n,s,a,o,l){if(n.visiblePercentageThresholds&&void 0==n.visiblePercentageMin&&void 0==n.visiblePercentageMax){var h=[],c=n.visiblePercentageThresholds;if(!c||!d(c))return T().error("amp-analytics/visibility-manager","invalid visiblePercentageThresholds"),()=>{};for(var u=0;u<c.length;u++){var m=c[u];if(!d(m)||2!=m.length){T().error("amp-analytics/visibility-manager","visiblePercentageThresholds entry length is not 2");continue}if(!p(m[0])||!p(m[1])){T().error("amp-analytics/visibility-manager","visiblePercentageThresholds entry is not valid number");continue}var f=Number(m[0]),v=Number(m[1]);if(0>f||100<v||f>v||f==v&&100!=f&&0!=v){T().error("amp-analytics/visibility-manager","visiblePercentageThresholds entry invalid min/max value");continue}var g=n;g.visiblePercentageMin=f;g.visiblePercentageMax=v;var b=new Ai(g,t,r,i,se(e.ampdoc));h.push(xi(e,b,s,a,o,l))}return()=>{h.forEach((e=>e()))}}var y=new Ai(n,t,r,i,se(e.ampdoc));return xi(e,y,s,a,o,l)}function xi(e,t,r,i,n,s){i&&t.setReportReady(i);var a=se(e.ampdoc),o=a.getScrollTop();e.maybeUpdateMaxScrollDepth(o);r?(t.setReady(!1),r.then((()=>{t.setReady(!0);t.maybeSetInitialScrollDepth(o)}))):t.maybeSetInitialScrollDepth(o);t.onTriggerEvent((()=>{var r=e.getStartTime();var i=t.getState(r);i._avError_=t.getErrorInfoTemp();i.backgrounded=e.isBackgrounded()?1:0;i.backgroundedAtStart=e.isBackgroundedAtStart()?1:0;i.totalTime=Date.now()-r;if(s){i.elementId=s.id;i.opacity=Oi(s);r=(r=e.tc.getResourceForElementOptional(s))?r.getLayoutBox():a.getLayoutRect(s);var o=e.getElementVisibility(s),l=e.getElementIntersectionRect(s);Object.assign(i,B({intersectionRatio:o,intersectionRect:JSON.stringify(l)}))}else i.opacity=e.getRootMinOpacity(),i.intersectionRatio=e.getRootVisibility(),r=e.getRootLayoutBox();t.maybeDispose();r&&(Object.assign(i,B({elementX:r.left,elementY:r.top,elementWidth:r.width,elementHeight:r.height})),i.initialScrollDepth=Xr(r,a,t.getInitialScrollDepth()),i.maxScrollDepth=Xr(r,a,e.getMaxScrollDepth()));n(i)}));e.ba.push(t);t.unsubscribe((()=>{var r=e.ba.indexOf(t);-1!=r&&e.ba.splice(r,1)}));s&&t.unsubscribe(e.observe(s,(()=>t.update())));t.update();return function(){t.dispose()}}var Di=class{constructor(e,t){this.parent=e;this.ampdoc=t;this.tc=P(t,"resources");this.Gb=0;this.ba=[];this.G=null;this.fa=[];this.Cb=0;this.parent&&Mi(this.parent,this);var r=se(this.ampdoc);r.onChanged((()=>{this.maybeUpdateMaxScrollDepth(r.getScrollTop())}))}dispose(){this.setRootVisibility(0);for(var e=this.ba.length-1;0<=e;e--)this.ba[e].dispose();this.fa.forEach((e=>{e()}));this.fa.length=0;this.parent&&Ii(this.parent,this);if(this.G)for(e=0;e<this.G.length;e++)this.G[e].dispose()}unsubscribe(e){this.fa.push(e)}getStartTime(){}isBackgrounded(){}isBackgroundedAtStart(){}getRootMinOpacity(){}getRootLayoutBox(){}getRootElementTemp(){}getBoundingClientRectTemp(){}getElementLayoutBoxTemp(e){var t=this.tc.getResourceForElementOptional(e);return t?t.getLayoutBox():se(this.ampdoc).getLayoutRect(e)}getRootVisibility(){return this.parent?0<this.parent.getRootVisibility()?this.Gb:0:this.Gb}setRootVisibility(e){this.Gb=e;Ni(this);if(this.G)for(e=0;e<this.G.length;e++)Ni(this.G[e])}maybeUpdateMaxScrollDepth(e){e>this.Cb&&(this.Cb=e)}getMaxScrollDepth(){return this.Cb}listenRoot(e,t,r,i){var n=this.getRootVisibility.bind(this),s=this.getRootLayoutBox.bind(this);var a;this.getRootElementTemp()&&(a=this.getBoundingClientRectTemp.bind(this,this.getRootElementTemp()));return Ci(this,n,s,a||null,e,t,r,i)}listenElement(e,t,r,i,n){var s=this.getElementVisibility.bind(this,e),a=this.getElementLayoutBoxTemp.bind(this,e),o=this.getBoundingClientRectTemp.bind(this,e);return Ci(this,s,a,o,t,r,i,n,e)}observe(){}getElementVisibility(){}getElementIntersectionRect(){}};var ji=class extends Di{constructor(e){super(null,e);this.S=se(e);this.Ob=!e.isVisible();this.ob=this.isBackgrounded();this.R=Object.create(null);this.aa=this.uc=null;if("inabox"==c(this.ampdoc.win).runtime){e=this.ampdoc.getRootNode();var t=e.documentElement||e.body||e;this.uc=t;this.unsubscribe(this.observe(t,this.setRootVisibility.bind(this)));var r=()=>{var e=Pi(t),r=this.R[e];r&&(r.isVisible=1>this.ampdoc.win.innerHeight||1>this.ampdoc.win.innerWidth?!1:!0,this.setRootVisibility(r.isVisible?r.intersectionRatio:0))};this.ampdoc.win.addEventListener("resize",r);this.unsubscribe((()=>{this.ampdoc.win.removeEventListener("resize",r)}))}else this.setRootVisibility(this.ampdoc.isVisible()?1:0),this.unsubscribe(this.ampdoc.onVisibilityChanged((()=>{var e=this.ampdoc.isVisible();e||(this.Ob=!0);this.setRootVisibility(e?1:0)})))}dispose(){super.dispose();this.aa&&(this.aa.disconnect(),this.aa=null)}getStartTime(){return this.ampdoc.getFirstVisibleTime()}isBackgrounded(){return this.Ob}isBackgroundedAtStart(){return this.ob}getRootMinOpacity(){var e=this.ampdoc.getRootNode();return Oi(e.documentElement||e.body||e)}getRootElementTemp(){return this.uc}getRootLayoutBox(){var e=this.ampdoc.getRootNode();return this.S.getLayoutRect(e.documentElement||e.body||e)}observe(e,t){var r=Pi(e);var i=this.R[r];i?0<i.intersectionRatio&&i.isVisible&&t(i.intersectionRatio):(i={element:e,intersectionRatio:0,intersectionRect:null,isVisible:!1,boundingClientRect:null,listeners:[]},this.R[r]=i);i.listeners.push(t);this.aa||(this.aa=new this.ampdoc.win.IntersectionObserver(this.bd.bind(this),{threshold:Ri}));this.aa.observe(e);return()=>{var i=this.R[r];if(i){var n=i.listeners.indexOf(t);-1!=n&&i.listeners.splice(n,1);0==i.listeners.length&&(this.aa.unobserve(e),delete this.R[r])}}}getElementVisibility(e){if(0==this.getRootVisibility())return 0;e=Pi(e);return(e=this.R[e])&&e.isVisible&&e.intersectionRatio||0}getBoundingClientRectTemp(e){if(!e)return null;e=Pi(e);return(e=this.R[e])&&e.boundingClientRect}getElementIntersectionRect(e){if(0>=this.getElementVisibility(e))return null;e=Pi(e);return(e=this.R[e])?e.intersectionRect:null}bd(e){e.forEach((e=>{var t=e.intersectionRect;t=Kr(Number(t.left),Number(t.top),Number(t.width),Number(t.height));var{boundingClientRect:r}=e;r=r&&Kr(Number(r.left),Number(r.top),Number(r.width),Number(r.height));var i=e.intersectionRatio,n=t,s=r;i=Math.min(Math.max(i,0),1);e=Pi(e.target);e=this.R[e];var a=!0;if(1>s.width||1>s.height)a=!1;if(e)for(e.isVisible=a,e.intersectionRatio=i,e.intersectionRect=n,e.boundingClientRect=s,n=0;n<e.listeners.length;n++)e.listeners[n](e.isVisible?i:0)}))}};var ki=class extends Di{constructor(e,t){super(e,e.ampdoc);this.embed=t;this.ob=this.parent.isBackgrounded();this.unsubscribe(this.parent.observe(t.host,this.setRootVisibility.bind(this)))}getStartTime(){return this.embed.getStartTime()}isBackgrounded(){return this.parent.isBackgrounded()}isBackgroundedAtStart(){return this.ob}getRootMinOpacity(){return Oi(this.embed.iframe)}getRootElementTemp(){return null}getBoundingClientRectTemp(){return null}getRootLayoutBox(){var e=this.embed.iframe;return se(this.ampdoc).getLayoutRect(e)}observe(e,t){return this.parent.observe(e,t)}getElementVisibility(e){return 0==this.getRootVisibility()?0:this.parent.getElementVisibility(e)}getElementIntersectionRect(e){return 0==this.getRootVisibility()?null:this.parent.getElementIntersectionRect(e)}};var Li=["AMP-AD","AMP-ANALYTICS","AMP-PIXEL","AMP-AD-EXIT"];function Ui(e,t,r){e=C(e);return Vi(e,t,(e=>e.isDisplayed()&&(e.overlaps(r)||e.isFixed())?!0:!1)).then((e=>{var t=[];e.forEach((e=>{Li.includes(e.element.tagName)||t.push(e.loadedOnce())}));return Promise.all(t)}))}function Vi(e,t,r){return e.signals().whenSignal("ready-scan").then((()=>{var r=[];P(e,"resources").get().forEach((e=>{e.hasBeenMeasured()||e.hostWin!=t||e.hasOwner()||r.push(e.getPageLayoutBoxAsync())}));return Promise.all(r)})).then((()=>P(e,"resources").get().filter((e=>e.hostWin==t&&!e.hasOwner()&&e.hasBeenMeasured()&&r(e)))))}var Fi=/^vars(.+)/;function Hi(e){var t=0;var r=[];for(var i=0;i<e.length;i++)Object.keys(Q(e[i],Fi)).length?r.push(e[i]):t++;return r}function Bi(e,t){return e.ampdoc.whenReady().then((()=>{var r=[];for(var i=0;i<t.length;i++){var n,s=[];var a=t[i];try{n=e.getRoot().querySelectorAll(a)}catch(e){R(!1,`Invalid query selector ${a}`)}for(var o=0;o<n.length;o++)e.contains(n[o])&&s.push(n[o]);s=Hi(s);R(s.length,`Element "${a}" not found`);r=r.concat(s)}return r.filter(((e,t)=>r.indexOf(e)===t))}))}var qi=class{constructor(e){this.ampdoc=e;this.B=Object.create(null);this.Ea=this.Ia=null}dispose(){for(var e in this.B)this.B[e].dispose(),delete this.B[e];this.Ia&&this.Ia.dispose();this.Ea&&this.Ea.dispose()}getType(){}getRoot(){}getViewer(){return P(this.ampdoc,"viewer")}getRootElement(){var e=this.getRoot();return e.host||e.documentElement||e.body||e}getHostElement(){}signals(){}contains(e){return this.getRoot().contains(e)}getElementById(){}getTrackerForAllowlist(e,t){var r=t[e];return r?this.getTracker(e,r):null}getTracker(e,t){var r=this.B[e];r||(r=new t(this),this.B[e]=r);return r}getTrackerOptional(e){return this.B[e]||null}getElement(e,t,r=null){return":root"==t?s((()=>this.getRootElement())):":host"==t?new Promise((e=>{e(T().assertElement(this.getHostElement(),`Element "${t}" not found`))})):this.ampdoc.whenReady().then((()=>{var i,n=null;try{i="scope"==r?e.querySelector(t.replace(/^|,/g,"$&:scope ")):"closest"==r?K(e,t):this.getRoot().querySelector(t)}catch(e){R(!1,`Invalid query selector ${t}`)}i&&this.contains(i)&&(n=i);return T().assertElement(n,`Element "${t}" not found`)}))}getAmpElement(e,t,r){return this.getElement(e,t,r).then((e=>{var r=[e];for(var i=0;i<r.length;i++)R(r[i].classList.contains("i-amphtml-element"),'Element "%s" is required to be an AMP element',t);return e}))}getElements(e,t,r){return Ue(this.ampdoc.win)["visibility-trigger-improvements"]&&d(t)?(R(!r,"Cannot have selectionMethod %s defined with an array selector.",r),Bi(this,t)):this.getElement(e,t,r).then((e=>[e]))}createSelectiveListener(e,t,r,i=null){return n=>{if(":host"!=r)for(var s=this.getRootElement(),a="*"==r,o=":root"==r,{target:l}=n;l&&this.contains(l)&&("scope"!=i||o||t.contains(l));){if("closest"!=i||l.contains(t))if(a||o&&l==s||Wi(l,r)){e(l,n);break}l=l.parentElement}}}whenIniLoaded(){}getVisibilityManager(){this.Ia||(this.Ia=_i(this.getRoot()));return this.Ia}getScrollManager(){this.Ea||(this.Ea=new Yr(this));return this.Ea}};var Gi=class extends qi{constructor(e){super(e)}getType(){return"ampdoc"}getRoot(){return this.ampdoc.getRootNode()}getHostElement(){return null}signals(){return this.ampdoc.signals()}getElementById(e){return this.ampdoc.getElementById(e)}whenIniLoaded(){var e=se(this.ampdoc);"inabox"==c(this.ampdoc.win).runtime?e=e.getLayoutRect(this.getRootElement()):(e=e.getSize(),e=Kr(0,0,e.width,e.height));return Ui(this.ampdoc,this.ampdoc.win,e)}};var $i=class extends qi{constructor(e,t){super(e);this.embed=t}getType(){return"embed"}getRoot(){return this.embed.win.document}getHostElement(){return this.embed.iframe}signals(){return this.embed.signals()}getElementById(e){return this.embed.win.document.getElementById(e)}whenIniLoaded(){return this.embed.whenIniLoaded()}};function Wi(e,t){try{return Z(e,t)}catch(e){return T().error("amp-analytics/analytics-root","Bad query selector.",t,e),!1}}function zi(e,t){var r=C(t),i=(t=N(t))&&t.__AMP_EMBED__;return r==e.ampdoc&&!i&&e.F?e.F:Yi(i||r,(()=>i?new $i(r,i):new Gi(r)))}function Ji(e){switch(e){case"story":return fr;default:return mr}}function Yi(e,t){var r=e.__AMP_AN_ROOT;r||(r=t(),e.__AMP_AN_ROOT=r);return r}var Ki=class{constructor(e){this.ampdoc=e;this.F=zi(this,e.getRootNode())}dispose(){this.F.dispose()}getAnalyticsRoot(e){return zi(this,e)}createAnalyticsGroup(e){var t=zi(this,e);return new Br(t,e)}triggerEventForTarget(e,t,r={},i=!0){r=new ur(e,t,r,i);e=zi(this,e);t=hr(t);e.getTracker(t,Ji(t)).trigger(r)}};function Xi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,i)}return r}function Zi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xi(Object(r),!0).forEach((function(t){var i=r[t];t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Qi(e,t){var r={},i={enabled:rn(e)&&nn(e)},n=Object.keys(t).filter((e=>{var r=t[e],n=m(r);n||(i[e]=r);return n})),s=e.qa.isProxyOrigin(e.m.win.location);n.forEach((e=>{var n=Zi(Zi({},i),t[e]);!0!==n.enabled||!s&&!1!==n.proxyOnly||(n.ids?r[e]=n:T().error("amp-analytics/linker-manager",'"ids" is a required field for use of "linkers".'))}));return r}function en(e,t){var r=e.h;for(var i in r)if(e.fb[i]){var n=e,s=i;if(sn(n,t,r[i].destinationDomains)){var a=At(n.fb[s]);if(a){n={};n[s]=a;s=n;n=Ne(t);n=l(n.search);a=B({});var o=Object.keys(s);for(var h=0;h<o.length;h++)q(n,o[h])||(a[o[h]]=s[o[h]]);t=Ce(t,xe(a))}}}return t}function tn(e){e.Ua||e.Oc.then((t=>{e.Ua=t.beforeSubmit(e.Sc.bind(e))}))}function rn(e){return"googleanalytics"!==e.K||"googleanalytics"!==e.m.getMetaByName("amp-google-client-id-api")?!1:e.m.registerSingleton(2)}function nn(e){e=S(e.m.win,"platform");return e.isSafari()&&12<=e.getMajorVersion()}function sn(e,t,r){var{hostname:i}=e.qa.parse(t);if(r&&!Array.isArray(r))return!1;if(r)return an(r,i);if(e.m.win.location.hostname===i)return!1;var{sourceUrl:n,canonicalUrl:s}=P(e.m,"documentInfo").get(),a=e.qa.parse(s).hostname;t=ln(a)===ln(i);if(e.Va)return an([e.Va,"*"+e.Va],i)||t;e=e.qa.parse(n).hostname;return ln(e)===ln(i)||t}function an(e,t){for(var r=0;r<e.length;r++){var i,n=e[r];!(i=n===t)&&(i=-1!==n.indexOf("*"))&&(i=t,n=n.replace(/[-\/\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*"),i=new RegExp("^"+n+"$").test(i));if(i)return!0}return!1}var on=class{constructor(e,t,r,i){this.m=e;this.h=t.linkers;this.od=t.vars||{};this.K=r;this.j=i;this.fb={};this.qa=_(this.j,"url");this.Oc=k(x(e),"form-submit-service");this.Ua=null;this.D=Ht(this.m);this.Va=null}init(){if(!m(this.h))return i();this.Va=Ze(this.m.win);this.h=Qi(this,this.h);var e=Object.keys(this.h).map((e=>{var t=this.h[e].ids,r=Object.keys(t),i=r.map((e=>{var r=new It(this.od,void 0,!0);return this.Ra(t[e],r)}));return Promise.all(i).then((t=>{var i={};t.forEach(((e,t)=>{e&&(i[r[t]]=e)}));return this.fb[e]=i}))}));if(e.length){var t=P(this.m,"navigation");t.registerAnchorMutator(((e,t)=>{e.href&&"click"===t.type&&(e.href=en(this,e.href))}),2);t.registerNavigateToMutator((e=>en(this,e)),2)}tn(this);return Promise.all(e)}dispose(){this.Ua&&this.Ua()}Ra(e,t){var r=this.D.getMacros(this.j);return this.D.expandTemplate(e,t,this.j).then((e=>ie(this.j).expandUrlAsync(e,r)))}Sc(e){var t=e.form,r=e.actionXhrMutator;for(var i in this.h){e=this.h[i].destinationDomains;var n=t.getAttribute("action-xhr")||t.getAttribute("action");if(sn(this,n,e)){var s=t;e=r;n=i;var a=this.fb[n];if(a){a=At(a);var o=s.getAttribute("action-xhr");o?(s=o,n=`${encodeURIComponent(n)}=${encodeURIComponent(a)}`,n=Ce(s,n,void 0),e(n)):(e=s,n=B({type:"hidden",name:n,value:a}),n=J(e.ownerDocument,"input",n),e.appendChild(n))}}}}};function ln(e){return e.replace(/^(?:www\.|m\.|amp\.)+/,"")}function hn(e){e.isReady()&&e.queueSize()&&(e.ed.send("iframe-transport-events",{events:e.Ba}),e.Ba=[])}var cn=class{constructor(e){this.Pc=e;this.ic=!1;this.Ba=[];this.ed=new pt(this.Pc,(()=>{this.setIsReady()}))}isReady(){return this.ic}setIsReady(){this.ic=!0;hn(this)}queueSize(){return this.Ba.length}enqueue(e){this.Ba.push(e);100<=this.queueSize()&&this.Ba.shift();hn(this)}};function un(e){return!!e.PerformanceObserver&&!!e.TaskAttributionTiming&&"containerName"in e.TaskAttributionTiming.prototype}function dn(e){un(e.sa)&&(vn[e.K]=new e.sa.PerformanceObserver((t=>{t&&t.getEntries().forEach((t=>{t&&"longtask"==t.entryType&&"cross-origin-descendant"==t.name&&t.attribution&&t.attribution.forEach((t=>{e.Zb==t.containerSrc&&0==++e.$c%5&&T().error("amp-analytics/iframe-transport",`Long Task: Vendor: "${e.K}"`)}))}))})),vn[e.K].observe({entryTypes:["longtask"]}))}var mn=class{constructor(e,t,r,i){this.sa=e;this.K=t;this.Xb=i;this.Zb=r.iframe;this.$c=0;this.processCrossDomainIframe()}detach(){var e=this.sa.document,t=this.K;var r=pn[t];--r.usageCount||(e.body.removeChild(r.frame),delete pn[t],vn[t]&&(vn[t].disconnect(),vn[t]=null))}processCrossDomainIframe(){var e;q(pn,this.K)?(e=pn[this.K],++e.usageCount):(e=this.createCrossDomainIframe(),this.sa.document.body.appendChild(e.frame),dn(this))}createCrossDomainIframe(){var e=String(++fn);var t=JSON.stringify({scriptSrc:y.thirdParty+"/2012090206000/iframe-transport-client-v0.js",sentinel:e,type:this.K}),r=J(this.sa.document,"iframe",{sandbox:"allow-scripts allow-same-origin",name:t,"data-amp-3p-sentinel":e});r.sentinel=e;at(r);r.src=this.Zb;e={frame:r,usageCount:1,queue:new cn(r)};return pn[this.K]=e}sendRequest(e){pn[this.K].queue.enqueue({creativeId:this.Xb,message:e})}getCreativeId(){return this.Xb}getType(){return this.K}};var pn={},fn=0,vn={};function gn(e,t,r){r&&"no-referrer"!==r&&T().error("pixel","Unsupported referrerPolicy: %s",r);return"no-referrer"===r?bn(e,t):yn(e,t)}function bn(e,t){if("referrerPolicy"in Image.prototype)return yn(e,t,!0);var r=J(e.document,"iframe",B({src:"about:blank",style:"display:none"}));r.onload=()=>{yn(r.contentWindow,t)};e.document.body.appendChild(r);return r}function yn(e,t,r=!1){e=new e.Image;r&&(e.referrerPolicy="no-referrer");e.src=t;return e}function En(e,t){try{var r=N(e,t).parentElement;if("AMP-AD"==r.nodeName)return String(r.getResourceId())}catch(e){}return null}function wn(e,t){e=e.navigator.sendBeacon?e.navigator.sendBeacon.bind(e.navigator):void 0;return e?e(t.url,t.payload||""):!1}function An(e,t){e=e.XMLHttpRequest;if(!e)return!1;var r=new e;if(!("withCredentials"in r))return!1;r.open("POST",t.url,!0);r.withCredentials=!0;r.setRequestHeader("Content-Type","text/plain");r.onreadystatechange=()=>{};r.send(t.payload||"");return!0}function Tn(e,t,r){e&&(e=gn(e,t.url,r),ue(e).then((()=>{})).catch((()=>{})))}var On=class{constructor(e,t={}){this.l=e;this.N=t;this.oc=this.N.referrerPolicy;"no-referrer"===this.oc&&(this.N.beacon=!1,this.N.xhrpost=!1);this.wc=!!this.N.useBody;this.$=null;this.$a="inabox"==c(e).runtime}sendRequest(e,t,r){if(e&&0!==t.length){var i=Qr["default"],n=Rn((function(n){n=r?i.generateBatchRequest(e,t,n):i.generateRequest(e,t[0],n);De(n.url,"amp-analytics request");var s=n.url,a=Ne(s);a=l(a.search);R(!("__amp_source_origin"in a),"Source origin is not allowed in %s",s);return n}));this.N.iframe?this.$?this.$.sendRequest(n(!1).url):O().error("amp-analytics/transport","iframe transport was inadvertently deleted"):this.N.beacon&&wn(this.l,n(this.wc))||this.N.xhrpost&&An(this.l,n(this.wc))||this.N.image&&Tn(this.l,n(!1),this.oc)}}maybeInitIframeTransport(e){if(this.N.iframe&&!this.$){var t=I(e.ownerDocument.defaultView),r=e.getAttribute("type"),i=this.$a?"1":T().assertString(En(e,t),"No friendly amp-ad ancestor element was found for amp-analytics tag with iframe transport.");this.$=new mn(t,r,this.N,i)}}deleteIframeTransport(){this.$&&(this.$.detach(),this.$=null)}sendRequestUsingIframe(e,t){if(e=ei(e,[t])){De(e,"amp-analytics request");R(Ne(e).origin!=Ne(this.l.location.href).origin,"Origin of iframe request must not be equal to the document origin. See https://github.com/ampproject/amphtml/blob/master/spec/amp-iframe-origin-policy.md for details.");var r=this.l.document.createElement("iframe");at(r);r.onload=r.onerror=()=>{S(this.l,"timer").delay((()=>{r.parentElement&&r.parentElement.removeChild(r)}),5e3)};r.setAttribute("amp-analytics","");r.setAttribute("sandbox","allow-scripts allow-same-origin");r.src=e;this.l.document.body.appendChild(r)}else T().error("amp-analytics/transport","Request not sent. Contents empty.")}};function Rn(e){var t={};return r=>{var i=String(r);void 0===t[i]&&(t[i]=e(r));return t[i]}}var Sn=["visible","hidden","ini-load","render-start"];function Pn(e){if(e.O)return e.O;e.O=e.getAmpDoc().whenFirstVisible().then((()=>S(e.win,"timer").promise(1))).then((()=>e.Vb)).then((()=>S(e.win,"ampdoc"))).then((t=>t.getAmpDoc(e.element))).then((e=>Promise.all([k(x(e),"amp-analytics-instrumentation"),k(x(e),"amp-analytics-variables")]))).then((t=>{e.fc=t[0];e.D=t[1];var r=new n,i=()=>{var t=new Xt(e.element).loadConfig();r.resolve(t)};qr(e.win)?Cr(e.element,i,20):i();return r.promise})).then((t=>{e.h=t;return new zr(e.win,e.element,e.h).write()})).then((()=>{e.X=new On(e.win,e.h.transport||{})})).then(e.hd.bind(e)).then(e.Wc.bind(e));e.O.then((()=>{e.collapse()}));return e.O}function _n(e){if(e.$a)return!0;null==e.yb&&(e.yb=ft(e.element));return e.yb}function Mn(e){var t=e.h.optoutElementId;if(t&&e.win.document.getElementById(t))return!0;if(!e.h.optout)return!1;var r=e.h.optout.split(".");e=e.win;for(var i=0;i<r.length;i++){if(!e)return!1;e=e[r[i]]}return e()}function In(e){if(!e.h.requests){if(!_n(e)){var t=e.o();e.user().warn(t,"No request strings defined. Analytics data will not be sent from this page.")}}else if(e.h.requests){for(var r in e.h.requests)q(e.h.requests,r)&&!e.h.requests[r].baseUrl&&(e.user().error("amp-analytics","request must have a baseUrl"),delete e.h.requests[r]);for(var i in e.h.requests)e.h.requests[i].baseUrl=W(e.h.requests[i].baseUrl,(t=>{var r=e.h.requests[t];return r&&r.baseUrl||"${"+t+"}"}));r={};for(t in e.h.requests)q(e.h.requests,t)&&(r[t]=new fi(e.element,e.h.requests[t],S(e.win,"preconnect"),e.X,e.U));e.Da=r}}function Nn(e,t,r){if(t&&r){var i=0;for(var n in r){if(16<++i){t=e.o();e.user().error(t,"More than 16 extraUrlParamsReplaceMap rules aren't allowed; Skipping the rest");break}for(var s in t){var a=s.replace(n,r[n]);if(s!=a){var o=t[s];delete t[s];t[a]=o}}}}}function Cn(e,t,r,i,n){var s={};Zt(e.h.vars,s);Zt(r.vars,s);Zt(t.vars,s);return new It(s,i,n)}function xn(e,t){var r=t.sampleSpec,i=e.o();if(!r)return Promise.resolve(!0);var s=r.sampleOn;if(!s)return e.user().error(i,"Invalid sampleOn value."),Promise.resolve(!0);var a=parseFloat(r.threshold);if(0<=a&&100>=a){var o=new n,l=()=>{var r=Cn(e,B({}),t),i=e.Ra(s,r).then((t=>e.Mc.uniform(t))).then((e=>100*e<a));o.resolve(i)};qr(e.win)?Cr(e.element,l,10):l();return o.promise}T().error(i,"Invalid threshold for sampling.");return Promise.resolve(!0)}function Dn(e,t){if(!e.ha)return i();try{return e.ha.addTrigger(t,e.Rc.bind(e,t))}catch(r){return e=e.o(),w(e,'Failed to process trigger "'+t.on+'"',r),i()}}function jn(e,t,r,i){e.element.ownerDocument.defaultView||e.o();var n=e.Da[t],s=_n(e)&&r.parentPostMessage;if(void 0!=t&&!n&&(t=e.o(),e.user().error(t,"Ignoring request for event. Request string not found: ",r.request),!s))return;kn(e,r,i).then((t=>{var s=e.element.ownerDocument&&e.element.ownerDocument.defaultView;t&&s&&(n&&(e.h.vars.requestCount++,t=Cn(e,i,r),n.send(e.h.extraUrlParams,r,t)),Ln(e,r,i))}))}function kn(e,t,r){r=Cn(e,r,t);var i=Un(e,e.h.enabled,r),n=Un(e,t.enabled,r);return Promise.all([i,n]).then((e=>e[0]&&e[1]))}function Ln(e,t,r){var i=t.parentPostMessage;i&&_n(e)&&(r=Cn(e,r,t),vi(e.getAmpDoc(),i,e.h.extraUrlParams,t,r,e.element).then((t=>{var r=e.win;r.parent&&r.parent!=r&&e.win.parent.postMessage(t,"*")})))}function Un(e,t,r){return void 0===t?Promise.resolve(!0):"boolean"===typeof t?Promise.resolve(t):e.Ra(t,r).then((e=>Gt(e)))}var Vn=class extends e.BaseElement{constructor(e){super(e);this.Vb=i();this.sb=null;this.U=!1;this.Da={};this.h={};this.D=this.ha=this.fc=null;this.Mc=S(this.win,"crypto");this.X=this.O=null;this.$a="inabox"==c(this.win).runtime;this.yb=this.xa=null}getLayoutPriority(){return this.$a?0:1}isAlwaysFixed(){return!ft(this.element)}isLayoutSupported(){return!0}buildCallback(){this.U=this.element.hasAttribute("sandbox");this.element.setAttribute("aria-hidden","true");this.sb=this.element.getAttribute("data-consent-notification-id");null!=this.sb&&(this.Vb=ee(this.element).then((e=>e.get(this.sb))));"immediate"==this.element.getAttribute("trigger")&&Pn(this)}layoutCallback(){return Pn(this)}detachedCallback(){this.ha&&(this.ha.dispose(),this.ha=null);this.xa&&(this.xa.dispose(),this.xa=null);for(var e in this.Da)this.Da[e].dispose(),delete this.Da[e]}resumeCallback(){this.O&&this.O.then((()=>{this.X.maybeInitIframeTransport(this.element)}))}unlayoutCallback(){if(this.getAmpDoc().isVisible())return!1;this.O&&this.O.then((()=>{this.X.deleteIframeTransport()}));return super.unlayoutCallback()}hd(){if(Mn(this))return this.o(),i();In(this);if(!this.h.triggers){var e=this.o();this.user().warn(e,"No triggers were found in the config. No analytics data will be sent.");return i()}Nn(this,this.h.extraUrlParams,this.h.extraUrlParamsReplaceMap);this.ha=this.fc.createAnalyticsGroup(this.element);this.X.maybeInitIframeTransport(this.element);e=[];for(var t in this.h.triggers)if(q(this.h.triggers,t)){let i=this.h.triggers[t],a=Cn(this,B({}),i,void 0,!0),o=this.o();if(!i){this.user().error(o,"Trigger should be an object: ",t);continue}var r=i.request||i.parentPostMessage&&_n(this);if(i.on&&r){if(this.U){var n=i.on;if(f(n)&&!Sn.includes(n)){this.user().error(o,n+" is not supported for amp-analytics in scope");continue}}Nn(this,i.extraUrlParams,this.h.extraUrlParamsReplaceMap);e.push(xn(this,i).then((e=>{if(e)if(this.U){if(this.element.parentElement)return i.selector=this.element.parentElement.tagName,i.selectionMethod="closest",Dn(this,i)}else return i.selector&&!d(i.selector)?this.D.expandTemplate(i.selector,a,this.element).then((e=>{i.selector=e;return Dn(this,i)})):Dn(this,i)})))}else{var s=_n(this)?'/"parentPostMessage"':"";this.user().error(o,'"on" and "request"'+s+" attributes are required for data to be collected.")}}return Promise.all(e)}preload(e,t){S(this.win,"preconnect").preload(this.getAmpDoc(),e,t)}Wc(){var e=this.element.getAttribute("type");this.xa=new on(this.getAmpDoc(),this.h,e,this.element);var t=()=>{this.xa.init()};qr(this.win)?Cr(this.element,t,10):t()}Rc(e,t){var r=d(e.request)?e.request:[e.request];for(var i=0;i<r.length;i++)jn(this,r[i],e,t)}Ra(e,t){return this.D.expandTemplate(e,t,this.element).then((e=>ie(this.element).expandUrlAsync(e,this.D.getMacros(this.element))))}o(){return"AmpAnalytics "+(this.element.getAttribute("id")||"<unknown id>")}};(e=>{e.registerServiceForDoc("amp-analytics-instrumentation",Ki);e.registerServiceForDoc("activity",ye);var t=e.win,r=Rt;t=I(t);j(t,t,"amp-analytics-linker-reader",r);e.registerServiceForDoc("amp-analytics-variables",Ut);e.registerElement("amp-analytics",Vn)})(self.AMP)}});